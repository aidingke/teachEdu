webpackJsonp([0],{"/Jwq":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("fZjL"),i=s.n(a),n=s("Xxa5"),r=s.n(n),o=s("exGp"),c=s.n(o),l={name:"Completion",props:{objCom:{type:Object}},data:function(){return{numVal:0,filterInput:"",allVal:"",questKind:3,scores:"",checkScore:0,allScores:0,editBtn:0,tagTotal:"",dataVal:"",checkVal:0,checkAll:!0,isIndeterminate:!0,showAdd:!1,dialogTableVisible:!1,time:3,sendMsgDisabled:!1,form:{name:"",resData:[]},itemList:[],questList:[],ansList:[],resData:[{}]}},methods:{goBackInfo:function(){var e={showPaperShow:!0,addPaperShow:!1};this.$emit("goBackInfo",e)},resetForm:function(){this.form={name:"",resData:[]},this.showAdd=!1},changeValue:function(){console.log(1)},openAddInfo:function(){this.editBtn=-1,this.showAdd=!0},filterBy:function(e,t){return 0===t.length?(this.tagTotal=e.length,this.resData):(e=e.filter(function(e){if(e.qcDesc.match(t))return e.qcDesc.match(t)}),this.tagTotal=e.length,e)},AddInfo:function(){var e=this;return c()(r.a.mark(function t(){var s,a,i,n,o;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s={accessToken:"",questKind:e.questKind,questDesc:"",questAnswer:"",itemList:[]},a=void 0,i=void 0,i=e.form.resData,!(e.form.name.length<5||e.form.name.length>37)){t.next=7;break}return e.dialog("题目描述字数不能少于5个且不能多于36个！"),t.abrupt("return",!1);case 7:if(s.accessToken=e.form.token,s.questDesc=e.form.name,i.forEach(function(e,t){if(""==e.content)a=1;else{var i={};i.item=t+",",s.itemList.push(i),s.questAnswer+=e.content+"ψ"}}),1!=a){t.next=13;break}return e.dialog("选项内容必填哦"),t.abrupt("return",!1);case 13:if(s.questAnswer=s.questAnswer.substring(0,s.questAnswer.length-1),-1==e.editBtn){t.next=34;break}return s.id=e.tempEditId,t.next=18,e.$axios.addKind(s);case 18:if(1e3!=(n=t.sent).code){t.next=25;break}e.successMsg("编辑成功!"),e.getList(),e.showAdd=!1,t.next=32;break;case 25:if(1100!==n.code){t.next=30;break}return e.dialog(n.message),t.abrupt("return",!1);case 30:return e.dialog("请联系管理员"),t.abrupt("return",!1);case 32:t.next=39;break;case 34:return t.next=36,e.$axios.addKind(s);case 36:o=t.sent,e.resetForm(),1e3==o.code?(e.showAdd=!1,e.dialogTableVisible=!0,e.handleCheckedSingleChange(),e.getList()):e.dialog("操作失败");case 39:return t.abrupt("return",!1);case 40:case"end":return t.stop()}},t,e)}))()},editAnswers:function(e){console.log(this.resData[e]),this.showAdd=!0,this.form.name=this.resData[e].qcDesc,this.tempEditId=this.resData[e].questId;var t=[];this.resData[e].arr.forEach(function(e,s){var a={};a.content=e.answersl,t.push(a)}),this.form.resData=t,this.editBtn=e},getTxt1CursorPosition:function(){var e=document.getElementById("txt1"),t=-1;if(e.selectionStart)t=e.selectionStart;else if(e.value.length>0){var s=document.selection.createRange();s.moveStart("character",-this.form.name.length),t=s.text.length}return sessionStorage.setItem("cursurPosition",t)},addAnswers:function(){var e={title:"",content:"",answers:!1},t=sessionStorage.getItem("cursurPosition");if(!(this.form.resData.length<6))return this.dialog("不能再添加了！"),!1;e.id=this.form.resData.length-0,this.form.resData.push(e),"-1"===t?this.form.name+="("+(e.id+1)+")":t<this.form.name.length?this.form.name=this.form.name.slice(0,t)+"("+(e.id+1)+")"+this.form.name.slice(t):this.form.name=this.form.name.slice(0,t)+"("+(e.id+1)+")"},addAnswersSort:function(){for(var e=0,t=0,s=this.form.name.length;t<s;t++)this.form.name[t].match(/\d/)&&this.form.name[t]==Number(this.form.name.charAt(t))&&(e+=1,this.$set(this.form,"name",this.form.name.replace("("+this.form.name.lastIndexOf(this.form.name.charAt(t))+")","("+e+")")))},deleAnswers:function(e,t){var s=this;return c()(r.a.mark(function a(){var i,n;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i={questId:t},a.next=3,s.$axios.deleAnswers(i);case 3:if(1e3!==(n=a.sent).code){a.next=10;break}s.successMsg("删除题目成功!"),s.resData.splice(e,1),s.handleCheckedSingleChange(),a.next=17;break;case 10:if(1100!==n.code){a.next=15;break}return s.dialog(n.message),a.abrupt("return",!1);case 15:return s.dialog("请联系管理员"),a.abrupt("return",!1);case 17:case"end":return a.stop()}},a,s)}))()},closeAnswers:function(e){var t=0;this.form.name=this.form.name.replace("("+(e+1)+")","");for(var s=0,a=this.form.name.length;s<a;s++)this.form.name[s].match(/\d/)&&e<this.form.name.charAt(s)&&(this.form.name=this.form.name.replace("("+(e+2+t)+")","("+(e+1+t)+")"),t+=1);this.form.resData.splice(e,1)},onsearchHandle:function(){},handleCheckAllChange:function(e){this.checkAll?this.resData.forEach(function(e,t){e.checkedSingles=!0}):this.resData.forEach(function(e,t){e.checkedSingles=!1}),this.scoreFun()},handleCheckedSingleChange:function(e){this.scoreFun()},keyUpFun:function(){},scoreFun:function(){var e=0,t=0,s=0,a=!0,i=Number(this.scores);this.allVal=this.resData.length,this.resData.forEach(function(n,r){return e+=n.score,!0===n.checkedSingles?(t+=i,s++):a=!1,s}),e=this.objCom.scoresAll,this.checkAll=!!a,this.checkVal=s,this.allScores=e,this.checkScore=t},getList:function(){var e=this;return c()(r.a.mark(function t(){var s,a,n,o,c;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s={questKind:e.questKind},a=[],n=[],t.next=3,e.$axios.getKindList(s);case 3:if(1100!==(o=t.sent).code){t.next=9;break}return e.dialog(o.message),t.abrupt("return",!1);case 9:if(1e3!==o.code){t.next=18;break}if(0!=i()(o.data).length){t.next=13;break}return e.resData=[],t.abrupt("return",!1);case 13:e.questList=o.data.questList,e.questList.forEach(function(e,t){if((n=e.questAnswer.split("ψ")).length>0){var s=0,i={};i.questId=e.questId,i.qcDesc=e.qcDesc,i.score=e.score,i.isOwn=e.isOwn,i.arr=[],i.checkedSingles=!1,n.forEach(function(e,t){if(e.length>0){var a={};a.answersl=e,i.arr.push(a),s++}}),s>0&&a.push(i)}}),e.resData=a,e.objCom.parentData.length>0&&(c=e.objCom.parentData,e.scores=e.objCom.scores,e.resData.forEach(function(e,t){e.checkedSingles=!1,c.forEach(function(t,s){e.questId===t.questId&&(e.checkedSingles=!0)})})),e.scoreFun();case 18:case"end":return t.stop()}},t,e)}))()},submitInfo:function(){var e=this.resData,t=[],s={};s.tit=this.questKind,e.forEach(function(e,s){!0===e.checkedSingles&&t.push(e)}),s.score=this.checkScore,s.resData=t,this.$emit("getPaperInfo",s)}},mounted:function(){0==localStorage.getItem("userType")?(this.form.token=localStorage.getItem("accessToken"),null!==this.form.token&&""!=this.form.token||this.$router.push({path:"/Login"})):(this.status="",this.form.token="",this.$router.push({path:"/Login"})),this.getList()},computed:{name:function(){return this.form.arr.push(this.form.name)}},watch:{dialogTableVisible:function(e){if(e){var t=this;t.sendMsgDisabled=!0;var s=window.setInterval(function(){t.time--<=1&&(t.time=3,t.sendMsgDisabled=!1,t.dialogTableVisible=!1,window.clearInterval(s))},1e3)}}}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"Completion"},[s("Header",{attrs:{title:"填空题库"}}),e._v(" "),s("div",{staticStyle:{width:"50px",height:"50px",position:"relative","margin-top":"-50px"},on:{click:e.goBackInfo}}),e._v(" "),s("div",{staticClass:"headBox"},[s("h3",[e.hasQx("teach:quest:addKind")?s("span",{staticClass:"addTi",on:{click:e.openAddInfo}},[e._v("+")]):e._e(),e._v("每道填空题分数为"),s("input",{directives:[{name:"model",rawName:"v-model",value:e.scores,expression:"scores"}],domProps:{value:e.scores},on:{keyup:[e.scoreFun,e.keyUpFun],input:function(t){t.target.composing||(e.scores=t.target.value)}}}),e._v("分")])]),e._v(" "),s("div",{staticClass:"group-div"},[s("el-input",{staticClass:"input-with-select",attrs:{placeholder:"题目关键字","prefix-icon":"el-icon-search"},model:{value:e.filterInput,callback:function(t){e.filterInput=t},expression:"filterInput"}},[s("el-button",{attrs:{slot:"append"},on:{click:e.onsearchHandle},slot:"append"},[e._v("搜索")])],1)],1),e._v(" "),s("div",{staticClass:"selectBox"},[s("div",{staticClass:"contentBox"},[s("h3",[s("el-checkbox",{on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选("+e._s(e.checkVal)+"/"+e._s(e.allVal)+")")])],1),e._v(" "),e.tagTotal<=0?s("div",{staticClass:"noInfo"},[e._m(0)]):e._e(),e._v(" "),e._l(e.filterBy(e.resData,e.filterInput),function(t,a){return s("div",{key:a,staticClass:"timuBox"},[s("div",{staticClass:"timu"},[s("el-checkbox-group",{on:{change:e.handleCheckedSingleChange},model:{value:t.checkedSingles,callback:function(s){e.$set(t,"checkedSingles",s)},expression:"item.checkedSingles"}},[s("h4",[s("el-checkbox",{staticStyle:{display:"inline-block"},attrs:{checked:t.checkedSingles}},[e._v(e._s(a+1)+"、"+e._s(t.qcDesc))]),e._v(" "),1==t.isOwn?[s("span",{staticStyle:{float:"right"},on:{click:function(s){e.deleAnswers(a,t.questId)}}},[s("img",{attrs:{src:"static/img/dele.png"}})]),e._v(" "),s("span",{staticStyle:{float:"right"},on:{click:function(t){e.editAnswers(a)}}},[s("img",{attrs:{src:"static/img/edit.png"}})])]:e._e(),e._v(" "),s("span",{staticStyle:{float:"right",color:"#bbb","margin-right":"1%"}},[e._v(e._s(e.scores)+"分")])],2)]),e._v(" "),s("ul",e._l(t.arr,function(t,a){return s("li",{key:a},[e._v(" （"+e._s(a+1)+"） "),s("span",[e._v(e._s(t.answersl))])])}))],1)])})],2)]),e._v(" "),s("div",{staticClass:"selectBox subBox"},[s("el-row",[s("el-button",{attrs:{type:"primary"},on:{click:e.submitInfo}},[e._v("提交")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"填空题",visible:e.showAdd},on:{"update:visible":function(t){e.showAdd=t},close:e.resetForm}},[s("el-form",{attrs:{model:e.form}},[s("span",{staticStyle:{"font-size":"14px"}},[e._v("每题分数："),s("b",{staticStyle:{color:"red"}},[e._v(e._s(e.scores))]),e._v("分")]),e._v(" "),s("el-form-item",{attrs:{label:"题目描述"}},[s("el-input",{attrs:{maxlength:"36",type:"textarea",id:"txt1",autosize:{minRows:2,maxRows:4},placeholder:"请输入题目描述，最多36个字"},on:{change:e.changeValue,blur:e.getTxt1CursorPosition},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),s("div",[s("p",{staticStyle:{"font-size":"18px"}},[s("span",{staticStyle:{color:"#3DA2FE",float:"right"},on:{click:function(t){e.addAnswers()}}},[e._v("插入填空")]),e._v(" "),s("span",[e._v("正确答案")])]),e._v(" "),e._l(e.form.resData,function(t,a){return s("div",{key:a,staticClass:"contBoxMain"},[s("span",[e._v("（"+e._s(a+1)+"）")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"items.content"}],attrs:{placeholder:"输入答案"},domProps:{value:t.content},on:{input:function(s){s.target.composing||e.$set(t,"content",s.target.value)}}}),e._v(" "),s("i",{staticClass:"el-dialog__close el-icon el-icon-close closeBtn",on:{click:function(t){e.closeAnswers(a)}}})])})],2)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticStyle:{display:"inline",width:"45%"},attrs:{type:"primary"},on:{click:e.AddInfo}},[e._v("确 定")]),e._v(" "),s("el-button",{staticStyle:{display:"inline",width:"45%"},on:{click:e.resetForm}},[e._v("取 消")])],1)],1),e._v(" "),s("el-dialog",{attrs:{visible:e.dialogTableVisible,center:"","show-close":!1},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[s("div",{staticClass:"success-dialog"},[s("div",{staticClass:"content"},[s("img",{attrs:{src:"static/img/success.png"}}),e._v(" "),s("div",{staticClass:"name"},[e._v(" 新增填空题成功")]),e._v(" "),e.sendMsgDisabled?s("div",{staticClass:"time"},[e._v(e._s(e.time+"s回到详情页")+">")]):e._e()]),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticStyle:{display:"inline",width:"45%"},attrs:{type:"primary"},on:{click:e.openAddInfo}},[e._v("再加一个")]),e._v(" "),s("el-button",{staticStyle:{display:"inline",width:"45%"},on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("知道了")])],1)])]),e._v(" "),s("div",{staticClass:"scoreAll"},[s("p",[s("span",{staticClass:"big"},[e._v(e._s(e.checkScore))]),e._v("\n\t\t\t\t/"),s("span",[e._v("100 ")])]),e._v(" "),s("p",[e._v("试卷分值")])])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"default"},[t("img",{attrs:{src:"static/img/not-add-default.png",alt:""}}),this._v(" "),t("div",{staticClass:"not-class"},[this._v("\n\t\t\t\t\t\t\t暂无相关信息\n\t\t\t\t\t\t")])])}]};var d=s("VU/8")(l,u,!1,function(e){s("sI8T")},null,null);t.default=d.exports},"00oF":function(e,t){},"0b0c":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={name:"SuccessDialog",props:["dialogTableVisible","tip","hint","width"],data:function(){return{time:3,sendMsgDisabled:!0}},methods:{close:function(){this.$emit("successDone",this.dialogTableVisible)}},watch:{dialogTableVisible:function(e){var t=this;if(e){t.sendMsgDisabled=!0;var s=window.setInterval(function(){t.time=--t.time,t.time<=0&&(t.sendMsgDisabled=!1,window.clearInterval(s),t.time=3,t.close())},1e3)}}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"success-dialog"},[s("el-dialog",{attrs:{visible:e.dialogTableVisible,center:"","show-close":!1,width:e.width},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[s("div",{staticClass:"content"},[s("img",{attrs:{src:"static/img/success.png"}}),s("div",{staticClass:"name"},[e._v(e._s(e.tip))]),e.sendMsgDisabled?s("div",{staticClass:"time"},[e._v(e._s(e.time+"s回到"+e.hint)),e._t("stuResume-tip")],2):e._e(),s("div",{staticClass:"button-items"},[s("el-button",{attrs:{plain:"plain"},on:{click:e.close}},[e._v("知道了")])],1)])])],1)},staticRenderFns:[]};var n=s("VU/8")(a,i,!1,function(e){s("Tsqi")},null,null);t.default=n.exports},"5zde":function(e,t,s){s("zQR9"),s("qyJz"),e.exports=s("FeBl").Array.from},Cdx3:function(e,t,s){var a=s("sB3e"),i=s("lktj");s("uqUo")("keys",function(){return function(e){return i(a(e))}})},NDkj:function(e,t){},NKZo:function(e,t){},OULz:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("fZjL"),i=s.n(a),n=s("c/Tr"),r=s.n(n),o=s("Xxa5"),c=s.n(o),l=s("exGp"),u=s.n(l),d=s("0Mti"),h={name:"Discussion",props:{objDis:{type:Object}},data:function(){return{numVal:0,allVal:"",filterInput:"",questKind:4,scores:"",checkScore:0,allScores:0,editBtn:0,dataVal:"",tagTotal:"",tempEditId:"",tempImgArr:[],checkVal:0,checkAll:!1,isIndeterminate:!1,showAdd:!1,dialogTableVisible:!1,imgDialogVisible:!1,targetImg:"",time:3,sendMsgDisabled:!1,img_api:d.a.img_api,accessToken:"",fileList:[],form:{name:"",action:"/edu/teach/uploadImg",imgType:2,answers:"",questImg:"",checkedSingles:!0},resData:[{}]}},methods:{goBackInfo:function(){var e={showPaperShow:!0,addPaperShow:!1};this.$emit("goBackInfo",e)},showImages:function(){this.targetImg=event.target.getAttribute("src"),this.imgDialogVisible=!0},handleAvatarSuccess:function(e,t){if(1e3===e.code){this.successMsg("图片上传成功了"),this.form.questImg+=e.data.imgName+"ψ",this.showUpload=!1;var s=this.img_api+e.data.imgName;return this.fileList.push({url:s}),this.tempImgArr.push({questImg:e.data.imgName}),!1}return 100===e.code?(this.dialog(e.message),this.$router.push({path:"/Login"}),!1):(this.dialog("图片没上传成功！请联系管理员或者再试一次"),!1)},beforeAvatarUpload:function(e){if(void 0==e)return this.dialog("请上传图片"),!1;var t=e.name.lastIndexOf("."),s=e.name.length,a=e.name.substring(t+1,s);return e.size/1024/1024<2?"jpg"!==a.toLowerCase()&&"png"!==a.toLowerCase()&&"jpeg"!==a.toLowerCase()&&"gif"!==a.toLowerCase()?(this.dialog("请上传图片文件"),this.filess="",!1):void 0:(this.dialog("上传文件大小不能超过 2MB!"),this.filess="",!1)},openAddInfo:function(){this.form.name="",this.form.answers="",this.form.img="",this.editBtn=-1,this.showAdd=!0},filterBy:function(e,t){return 0===t.length?(this.tagTotal=e.length,this.resData):(e=e.filter(function(e){if(e.qcDesc.match(t))return e.qcDesc.match(t)}),this.tagTotal=e.length,e)},AddInfo:function(){var e=this;return u()(c.a.mark(function t(){var s,a,i;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s={accessToken:"",questKind:e.questKind,questDesc:"",questAnswer:"",questImg:e.form.questImg,itemList:[]},void 0,void 0,!(e.form.name.length<5||e.form.name.length>37)){t.next=4;break}return e.dialog("题目描述字数不能少于5个且不能多于36个！"),t.abrupt("return",!1);case 4:if(!(e.form.answers.length<1||e.form.answers.length>255)){t.next=7;break}return e.dialog("答案字数不能少于1个且不能多于255个！"),t.abrupt("return",!1);case 7:if(s.accessToken=e.form.token,s.questDesc=e.form.name,s.questAnswer=e.form.answers,-1==e.editBtn){t.next=33;break}return s.questImg="",e.tempImgArr.forEach(function(e,t){s.questImg+=e.questImg+"ψ"}),s.id=e.tempEditId,t.next=16,e.$axios.addKind(s);case 16:if(1e3!=(a=t.sent).code){t.next=24;break}return e.successMsg("编辑成功!"),e.getList(),e.showAdd=!1,t.abrupt("return",!1);case 24:if(1100!==a.code){t.next=29;break}return e.dialog(a.message),t.abrupt("return",!1);case 29:return e.dialog("请联系管理员"),t.abrupt("return",!1);case 31:t.next=51;break;case 33:return t.next=35,e.$axios.addKind(s);case 35:if(1e3!=(i=t.sent).code){t.next=44;break}e.showAdd=!1,e.dialogTableVisible=!0,e.fileList=[],e.handleCheckedSingleChange(),e.getList(),t.next=51;break;case 44:if(1100!==i.code){t.next=49;break}return e.dialog(i.message),t.abrupt("return",!1);case 49:return e.dialog("请联系管理员"),t.abrupt("return",!1);case 51:return t.abrupt("return",!1);case 52:case"end":return t.stop()}},t,e)}))()},handleRemove:function(e,t){var s=this,a=event.target.parentNode.parentNode.children,i=r()(a).indexOf(event.target.parentNode);this.tempImgArr.forEach(function(e,t){i==t&&s.tempImgArr.splice(t,1).splice(t,1)}),this.fileList=[],this.fileList=t},editAnswers:function(e){var t=this;this.showAdd=!0,this.form.name=this.resData[e].qcDesc,this.form.answers=this.resData[e].answersl,this.tempImgArr=this.resData[e].arr,this.tempEditId=this.resData[e].questId,this.fileList=[],this.resData[e].arr.forEach(function(e,s){var a={};a.url=t.img_api+e.questImg,t.fileList.push(a)}),this.editBtn=e},addAnswers:function(){if(!(this.form.resData.length<6))return this.dialog("不能再添加了！"),!1;this.form.resData.push({title:"",content:"",answers:!1})},deleAnswers:function(e,t){var s=this;return u()(c.a.mark(function a(){var i,n;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i={questId:t},a.next=3,s.$axios.deleAnswers(i);case 3:if(1e3!==(n=a.sent).code){a.next=10;break}s.successMsg("删除题目成功!"),s.resData.splice(e,1),s.handleCheckedSingleChange(),a.next=17;break;case 10:if(1100!==n.code){a.next=15;break}return s.dialog(n.message),a.abrupt("return",!1);case 15:return s.dialog("请联系管理员"),a.abrupt("return",!1);case 17:case"end":return a.stop()}},a,s)}))()},closeAnswers:function(e){if(e<1)return this.dialog("有且仅保留第一个答案，不能再删了！"),!1;this.form.resData.splice(e,1)},onsearchHandle:function(){},handleCheckAllChange:function(e){this.checkAll?this.resData.forEach(function(e,t){e.checkedSingles=!0}):this.resData.forEach(function(e,t){e.checkedSingles=!1}),this.scoreFun()},handleCheckedSingleChange:function(e){this.scoreFun()},keyUpFun:function(){},scoreFun:function(){var e=0,t=0,s=0,a=void 0,i=Number(this.scores);this.allVal=this.resData.length,this.resData.forEach(function(e,n){return!0===e.checkedSingles?(t+=i,s++):a=!1,a}),e=this.objDis.scoresAll,this.checkAll=a,this.checkVal=s,this.allScores=e,this.checkScore=t},getList:function(){var e=this;return u()(c.a.mark(function t(){var s,a,n,r,o;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s={questKind:e.questKind},a=[],[],n=[],t.next=3,e.$axios.getKindList(s);case 3:if(1100!==(r=t.sent).code){t.next=9;break}return e.dialog(r.message),t.abrupt("return",!1);case 9:if(1e3!==r.code){t.next=18;break}if(0!=i()(r.data).length){t.next=13;break}return e.resData=[],t.abrupt("return",!1);case 13:e.questList=r.data.questList,e.questList.forEach(function(e,t){var s={};if(n=e.questImg.split("ψ"),s.questId=e.questId,s.score=e.score,s.isOwn=e.isOwn,s.qcDesc=e.qcDesc,s.answersl=e.questAnswer,s.checkedSingles=!1,n.length>0){s.arr=[],n.forEach(function(e,t){if(e.length>0){var a={};a.questImg=e,s.arr.push(a),0}})}a.push(s)}),e.resData=a,e.objDis.parentData.length>0&&(o=e.objDis.parentData,e.scores=e.objDis.scores,e.resData.forEach(function(e,t){e.checkedSingles=!1,o.forEach(function(t,s){e.questId===t.questId&&(e.checkedSingles=!0)})})),e.scoreFun();case 18:case"end":return t.stop()}},t,e)}))()},submitInfo:function(){var e=this.resData,t=[],s={};s.tit=this.questKind,e.forEach(function(e,s){!0===e.checkedSingles&&t.push(e)}),s.score=this.checkScore,s.resData=t,this.$emit("getPaperInfo",s)}},mounted:function(){0==localStorage.getItem("userType")?(this.form.token=localStorage.getItem("accessToken"),this.accessToken=localStorage.getItem("accessToken"),null!==this.form.token&&""!=this.form.token||this.$router.push({path:"/Login"})):(this.status="",this.form.token="",this.$router.push({path:"/Login"})),this.getList()},watch:{dialogTableVisible:function(e){if(e){var t=this;t.sendMsgDisabled=!0;var s=window.setInterval(function(){t.time--<=1&&(t.time=3,t.sendMsgDisabled=!1,t.dialogTableVisible=!1,window.clearInterval(s))},1e3)}}}},f={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"Discussion"},[s("Header",{attrs:{title:"论述题"}}),e._v(" "),s("div",{staticStyle:{width:"50px",height:"50px",position:"relative","margin-top":"-50px"},on:{click:e.goBackInfo}}),e._v(" "),s("div",{staticClass:"headBox"},[s("h3",[e.hasQx("teach:quest:addKind")?s("span",{staticClass:"addTi",on:{click:e.openAddInfo}},[e._v("+")]):e._e(),e._v("每道论述题分数为"),s("input",{directives:[{name:"model",rawName:"v-model",value:e.scores,expression:"scores"}],domProps:{value:e.scores},on:{keyup:[e.scoreFun,e.keyUpFun],input:function(t){t.target.composing||(e.scores=t.target.value)}}}),e._v("分")])]),e._v(" "),s("div",{staticClass:"group-div"},[s("el-input",{staticClass:"input-with-select",attrs:{placeholder:"题目关键字","prefix-icon":"el-icon-search"},model:{value:e.filterInput,callback:function(t){e.filterInput=t},expression:"filterInput"}},[s("el-button",{attrs:{slot:"append"},on:{click:e.onsearchHandle},slot:"append"},[e._v("搜索")])],1)],1),e._v(" "),s("div",{staticClass:"selectBox"},[s("div",{staticClass:"contentBox"},[s("h3",{staticStyle:{"border-bottom":"1px solid #ddd"}},[s("el-checkbox",{attrs:{checked:"",indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选("+e._s(e.checkVal)+"/"+e._s(e.allVal)+")")])],1),e._v(" "),e.tagTotal<=0?s("div",{staticClass:"noInfo"},[e._m(0)]):e._e(),e._v(" "),e._l(e.filterBy(e.resData,e.filterInput),function(t,a){return s("div",{key:a,staticClass:"timuBox"},[s("div",{staticClass:"timu"},[s("el-checkbox-group",{on:{change:e.handleCheckedSingleChange},model:{value:t.checkedSingles,callback:function(s){e.$set(t,"checkedSingles",s)},expression:"item.checkedSingles"}},[s("h4",[s("el-checkbox",{staticStyle:{display:"inline-block"},attrs:{checked:t.checkedSingles}},[e._v(e._s(a+1)+"、"+e._s(t.qcDesc))]),e._v(" "),1==t.isOwn?[s("span",{staticStyle:{float:"right"},on:{click:function(s){e.deleAnswers(a,t.questId)}}},[s("img",{attrs:{src:"static/img/dele.png"}})]),e._v(" "),s("span",{staticStyle:{float:"right"},on:{click:function(t){e.editAnswers(a)}}},[s("img",{attrs:{src:"static/img/edit.png"}})])]:e._e(),e._v(" "),s("span",{staticStyle:{float:"right",color:"#bbb","margin-right":"1%"}},[e._v(e._s(e.scores)+"分")])],2)]),e._v(" "),s("div",{staticClass:"contAnswers"},[s("div",e._l(t.arr,function(t,a){return s("span",{key:a,staticStyle:{"vertical-align":"top",display:"inline-block","margin-right":"1%"}},[s("img",{staticStyle:{width:"100px"},attrs:{src:e.img_api+t.questImg},on:{click:e.showImages}})])})),e._v(" "),s("p",{staticStyle:{"font-size":"14px"}},[s("span",{staticStyle:{color:"#000"}},[e._v("答案：")]),e._v(e._s(t.answersl))])])],1)])})],2)]),e._v(" "),s("div",{staticClass:"selectBox"},[s("el-row",{staticStyle:{position:"fixed",bottom:"0",width:"100%","z-index":"999",background:"#fff"}},[s("el-button",{attrs:{type:"primary"},on:{click:e.submitInfo}},[e._v("提交")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"查看图片",visible:e.imgDialogVisible,width:"80%",center:""},on:{"update:visible":function(t){e.imgDialogVisible=t}}},[e._v(" --\x3e\n\t\t\t"),s("span",[e._v("查看图片")]),e._v(" "),s("div",{attrs:{id:"imgDialogVisible"}},[s("img",{staticStyle:{width:"100%"},attrs:{src:e.targetImg,preview:"0","preview-text":"描述文字"}})]),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.imgDialogVisible=!1}}},[e._v("确 定")])],1)]),e._v(" "),s("el-dialog",{attrs:{title:"论述题",visible:e.showAdd},on:{"update:visible":function(t){e.showAdd=t}}},[s("el-form",{attrs:{model:e.form}},[s("span",{staticStyle:{"font-size":"14px"}},[e._v("每题分数："),s("b",{staticStyle:{color:"red"}},[e._v(e._s(e.scores))]),e._v("分")]),e._v(" "),s("el-form-item",{attrs:{label:"题目描述"}},[s("el-input",{attrs:{maxlength:"36",type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入题目描述，最多36个字"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"上传图片"}},[s("p",{staticClass:"addTip"},[e._v("*请上传图片，大小限制在3M内")]),e._v(" "),s("el-upload",{staticClass:"avatar-uploader",attrs:{headers:{accessToken:this.accessToken},"auto-upload":!0,"list-type":"picture","file-list":e.fileList,action:e.form.action,"show-file-list":!0,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,"on-remove":e.handleRemove,name:"imgFile",data:{imgType:e.form.imgType},accept:"image/jpg,image/jpeg,image/png,image/gif"}},[s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),s("el-form-item",{attrs:{label:"正确答案"}},[s("el-input",{attrs:{maxlength:"255",type:"textarea",autosize:{minRows:3,maxRows:16},placeholder:"请输入答案，最多255个字"},model:{value:e.form.answers,callback:function(t){e.$set(e.form,"answers",t)},expression:"form.answers"}})],1),e._v(" "),s("el-button",{staticStyle:{width:"45%",display:"inline-block"},attrs:{type:"primary"},on:{click:e.AddInfo}},[e._v("确 定")]),e._v(" "),s("el-button",{staticStyle:{width:"45%",display:"inline-block"},on:{click:function(t){e.showAdd=!1}}},[e._v("取 消")])],1)],1),e._v(" "),s("el-dialog",{attrs:{visible:e.dialogTableVisible,center:"","show-close":!1},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[s("div",{staticClass:"success-dialog"},[s("div",{staticClass:"content"},[s("img",{attrs:{src:"static/img/success.png"}}),e._v(" "),s("div",{staticClass:"name"},[e._v(" 新增论述题成功")]),e._v(" "),e.sendMsgDisabled?s("div",{staticClass:"time"},[e._v(e._s(e.time+"s回到详情页")+">")]):e._e()]),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticStyle:{width:"45%",display:"inline-block"},attrs:{type:"primary"},on:{click:e.openAddInfo}},[e._v("再加一个")]),e._v(" "),s("el-button",{staticStyle:{width:"45%",display:"inline-block"},on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("知道了")])],1)])]),e._v(" "),s("div",{staticClass:"scoreAll"},[s("p",[s("span",{staticClass:"big"},[e._v(e._s(e.checkScore))]),e._v("\n\t\t\t\t/"),s("span",[e._v("100 ")])]),e._v(" "),s("p",[e._v("试卷分值")])])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"default"},[t("img",{attrs:{src:"static/img/not-add-default.png",alt:""}}),this._v(" "),t("div",{staticClass:"not-class"},[this._v("\n\t\t\t\t\t\t\t暂无相关信息\n\t\t\t\t\t\t")])])}]};var m=s("VU/8")(h,f,!1,function(e){s("NKZo")},null,null);t.default=m.exports},"Pc2/":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("fZjL"),i=s.n(a),n=s("Xxa5"),r=s.n(n),o=s("exGp"),c=s.n(o),l={name:"Judge",props:{objJud:{type:Object}},data:function(){return{filterInput:"",allVal:"",scores:"",checkScore:0,allScores:0,tagTotal:"",editBtn:0,tempEditId:"",dataVal:"",keyNums:4,checkVal:0,checkAll:!1,isIndeterminate:!0,showAdd:!1,dialogTableVisible:!1,time:3,sendMsgDisabled:!1,questKind:2,form:{token:"",subjectId:2,questKind:0,radio:"",name:"",answers:[{title:"0",content:""},{title:"1",content:""}]},resData:[{}]}},methods:{goBackInfo:function(){var e={showPaperShow:!0,addPaperShow:!1};this.$emit("goBackInfo",e)},openAddInfo:function(){this.form.name="",this.form.radio="",this.form.answers.forEach(function(e,t){e.title=t,e.content=""}),this.editBtn=-1,this.showAdd=!0},filterBy:function(e,t){return 0===t.length?(this.tagTotal=e.length,this.resData):(e=e.filter(function(e){if(e.qcDesc.match(t))return e.qcDesc.match(t)}),this.tagTotal=e.length,e)},AddInfo:function(){var e=this;return c()(r.a.mark(function t(){var s,a,i,n,o;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s={accessToken:"",questKind:e.questKind,questDesc:"",questAnswer:"",itemList:[]},a=void 0,i=[],!(e.form.name.length<5||e.form.name.length>37)){t.next=6;break}return e.dialog("题目描述字数不能少于5个且不能多于36个！"),t.abrupt("return",!1);case 6:if(""!==e.form.radio){t.next=11;break}return e.dialog("请选个正确答案(即垂下小圆圈)"),t.abrupt("return",!1);case 11:if(s.questDesc=e.form.name,e.form.answers.forEach(function(e,t,s){if(""==e.content)a=1;else{var n,r={};n=0==t?"A":1==t?"B":2==t?"C":3==t?"D":4==t?"E":5==t?"F":"无解",r.item=n,r.itemDesc=e.content,i.push(r)}}),1!=a){t.next=16;break}return e.dialog("选项内容必填"),t.abrupt("return",!1);case 16:if(s.itemList=i,s.questAnswer=e.form.radio,s.accessToken=e.form.token,-1==e.editBtn){t.next=39;break}return s.id=e.tempEditId,t.next=23,e.$axios.addKind(s);case 23:if(1e3!=(n=t.sent).code){t.next=30;break}e.successMsg("编辑成功!"),e.getList(),e.showAdd=!1,t.next=37;break;case 30:if(1100!==n.code){t.next=35;break}return e.dialog(n.message),t.abrupt("return",!1);case 35:return e.dialog("请联系管理员"),t.abrupt("return",!1);case 37:t.next=56;break;case 39:return t.next=41,e.$axios.addKind(s);case 41:if(1e3!=(o=t.sent).code){t.next=49;break}e.showAdd=!1,e.dialogTableVisible=!0,e.handleCheckedSingleChange(),e.getList(),t.next=56;break;case 49:if(1100!==o.code){t.next=54;break}return e.dialog(o.message),t.abrupt("return",!1);case 54:return e.dialog("请联系管理员"),t.abrupt("return",!1);case 56:return t.abrupt("return",!1);case 57:case"end":return t.stop()}},t,e)}))()},editAnswers:function(e){this.showAdd=!0,this.form.name=this.resData[e].qcDesc,this.form.radio=this.resData[e].answers,this.tempEditId=this.resData[e].questId;var t=[];this.resData[e].arr.forEach(function(e,s){var a={};a.title=s,a.content=e.itemDesc,t.push(a)}),this.form.answers=t,this.editBtn=e},addAnswers:function(){var e,t={title:"",content:""};if(e=this.keyNums,t.title=e,this.keyNums++,!(this.form.answers.length<6))return this.dialog("不能再添加了！"),!1;this.form.answers.push(t)},deleAnswers:function(e,t){var s=this;return c()(r.a.mark(function a(){var i;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i={questId:t},a.next=3,s.$axios.deleAnswers(i);case 3:if(1e3!==a.sent.code){a.next=10;break}s.successMsg("删除题目成功!"),s.resData.splice(e,1),s.handleCheckedSingleChange(),a.next=12;break;case 10:return s.dialog("删除出错了！请联系管理员"),a.abrupt("return",!1);case 12:case"end":return a.stop()}},a,s)}))()},closeAnswers:function(e){if(e<2)return this.dialog("保留前2个选项，不能再删了！"),!1;this.form.radio="",this.form.answers.splice(e,1),console.log(this.form)},onsearchHandle:function(){},handleCheckAllChange:function(e){this.checkAll?this.resData.forEach(function(e,t){e.checkedSingles=!0}):this.resData.forEach(function(e,t){e.checkedSingles=!1}),this.scoreFun()},handleCheckedSingleChange:function(e){this.scoreFun()},keyUpFun:function(){},scoreFun:function(){var e=0,t=0,s=0,a=!0,i=Number(this.scores);this.allVal=this.resData.length,this.resData.forEach(function(e,n){return!0===e.checkedSingles?(t+=i,s++):a=!1,a}),e=this.objJud.scoresAll,this.checkAll=!!a,this.checkVal=s,this.allScores=e,this.checkScore=t},getList:function(){var e=this;return c()(r.a.mark(function t(){var s,a,n,o,c,l;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s={questKind:e.questKind},a=[],n=[],t.next=3,e.$axios.getKindList(s);case 3:if(1100!==(o=t.sent).code){t.next=9;break}return e.dialog(o.message),t.abrupt("return",!1);case 9:if(1e3!==o.code){t.next=19;break}if(0!=i()(o.data).length){t.next=13;break}return e.resData=[],t.abrupt("return",!1);case 13:c=o.data.itemList,e.questList=o.data.questList,e.questList.forEach(function(e,t){if((n=e.questAnswer).length>0){var s=0,i={};i.questId=e.questId,i.qcDesc=e.qcDesc,i.score=e.score,i.isOwn=e.isOwn,i.arr=[],i.answers=Number(n),i.checkedSingles=!1,c.forEach(function(t,a){var n={};n.item=t.item,n.itemDesc=t.itemDesc,t.questId==e.questId&&(i.arr.push(n),s++)}),s>0&&a.push(i)}}),e.resData=a,e.objJud.parentData.length>0&&(l=e.objJud.parentData,e.scores=e.objJud.scores,e.resData.forEach(function(e,t){e.checkedSingles=!1,l.forEach(function(t,s){e.qcDesc===t.qcDesc&&(e.checkedSingles=!0)})})),e.scoreFun();case 19:case"end":return t.stop()}},t,e)}))()},submitInfo:function(){var e=this.resData,t=[],s={};s.tit=this.questKind,e.forEach(function(e,s){!0===e.checkedSingles&&t.push(e)}),s.score=this.checkScore,s.resData=t,this.$emit("getPaperInfo",s)}},mounted:function(){0==localStorage.getItem("userType")?(this.form.token=localStorage.getItem("accessToken"),null!==this.form.token&&""!=this.form.token||this.$router.push({path:"/Login"})):(this.status="",this.form.token="",this.$router.push({path:"/Login"})),this.getList()},watch:{dialogTableVisible:function(e){if(e){var t=this;t.sendMsgDisabled=!0;var s=window.setInterval(function(){t.time--<=1&&(t.time=3,t.sendMsgDisabled=!1,t.dialogTableVisible=!1,window.clearInterval(s))},1e3)}}}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"Judge"},[s("Header",{attrs:{title:"判断题库"}}),e._v(" "),s("div",{staticStyle:{width:"50px",height:"50px",position:"relative","margin-top":"-50px"},on:{click:e.goBackInfo}}),e._v(" "),s("div",{staticClass:"headBox"},[s("h3",[e.hasQx("teach:quest:addKind")?s("span",{staticClass:"addTi",on:{click:e.openAddInfo}},[e._v("+")]):e._e(),e._v("每道判断题分数为"),s("input",{directives:[{name:"model",rawName:"v-model",value:e.scores,expression:"scores"}],domProps:{value:e.scores},on:{keyup:[e.scoreFun,e.keyUpFun],input:function(t){t.target.composing||(e.scores=t.target.value)}}}),e._v("分")])]),e._v(" "),s("div",{staticClass:"group-div"},[s("el-input",{staticClass:"input-with-select",attrs:{placeholder:"题目关键字","prefix-icon":"el-icon-search"},model:{value:e.filterInput,callback:function(t){e.filterInput=t},expression:"filterInput"}},[s("el-button",{attrs:{slot:"append"},on:{click:e.onsearchHandle},slot:"append"},[e._v("搜索")])],1)],1),e._v(" "),s("div",{staticClass:"selectBox"},[s("div",{staticClass:"contentBox"},[s("h3",[s("el-checkbox",{on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选("+e._s(e.checkVal)+"/"+e._s(e.allVal)+")")])],1),e._v(" "),e.tagTotal<=0?s("div",{staticClass:"noInfo"},[e._m(0)]):e._e(),e._v(" "),e._l(e.filterBy(e.resData,e.filterInput),function(t,a){return s("div",{key:a,staticClass:"timuBox"},[s("el-checkbox-group",{on:{change:e.handleCheckedSingleChange},model:{value:t.checkedSingles,callback:function(s){e.$set(t,"checkedSingles",s)},expression:"item.checkedSingles"}},[s("div",{staticClass:"timu"},[s("h4",[s("el-checkbox",{staticStyle:{display:"inline-block"},attrs:{checked:t.checkedSingles}},[e._v(e._s(a+1)+"、"+e._s(t.qcDesc))]),e._v(" "),1==t.isOwn?[s("span",{staticStyle:{float:"right"},on:{click:function(s){e.deleAnswers(a,t.questId)}}},[s("img",{attrs:{src:"static/img/dele.png"}})]),e._v(" "),s("span",{staticStyle:{float:"right"},on:{click:function(t){e.editAnswers(a)}}},[s("img",{attrs:{src:"static/img/edit.png"}})])]:e._e(),e._v(" "),s("span",{staticStyle:{float:"right",color:"#bbb","margin-right":"1%"}},[e._v(e._s(e.scores)+"分")])],2),e._v(" "),e._l(t.arr,function(a,i){return s("el-radio-group",{key:i,model:{value:t.answers,callback:function(s){e.$set(t,"answers",s)},expression:"item.answers"}},[s("el-radio",{attrs:{label:i,disabled:""}},[e._v(e._s(a.item)+"、"+e._s(a.itemDesc))])],1)})],2)])],1)})],2)]),e._v(" "),s("div",{staticClass:"selectBox subBox"},[s("el-row",[s("el-button",{attrs:{type:"primary"},on:{click:e.submitInfo}},[e._v("提交")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"判断题",visible:e.showAdd},on:{"update:visible":function(t){e.showAdd=t}}},[s("el-form",{attrs:{model:e.form}},[s("span",{staticStyle:{"font-size":"14px"}},[e._v("每题分数："),s("b",{staticStyle:{color:"red"}},[e._v(e._s(e.scores))]),e._v("分")]),e._v(" "),s("el-form-item",{attrs:{label:"题目描述"}},[s("el-input",{attrs:{maxlength:"20",type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入题目描述，最多36个字"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),s("div",[s("p",{staticStyle:{"font-size":"18px"}},[s("span",[e._v("选项（勾选"),s("b",{staticStyle:{"font-size":"30px","font-weight":"300"}},[e._v("o")]),e._v("默认该选项为正确答案）")])]),e._v(" "),s("el-radio-group",{model:{value:e.form.radio,callback:function(t){e.$set(e.form,"radio",t)},expression:"form.radio"}},e._l(e.form.answers,function(t,a){return s("div",{key:a},[s("el-radio",{attrs:{label:a}},[e._v(e._s(0==a?"A":1==a?"B":2==a?"C":3==a?"D":4==a?"E":5==a?"F":""))]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"items.content"}],attrs:{placeholder:"答案"},domProps:{value:t.content},on:{input:function(s){s.target.composing||e.$set(t,"content",s.target.value)}}}),e._v(" "),s("i",{staticClass:"el-dialog__close el-icon el-icon-close closeBtn",on:{click:function(t){e.closeAnswers(a)}}})],1)}))],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticStyle:{display:"inline",width:"45%"},attrs:{type:"primary"},on:{click:e.AddInfo}},[e._v("确 定")]),e._v(" "),s("el-button",{staticStyle:{display:"inline",width:"45%"},on:{click:function(t){e.showAdd=!1}}},[e._v("取 消")])],1)],1),e._v(" "),s("el-dialog",{attrs:{visible:e.dialogTableVisible,center:"","show-close":!1},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[s("div",{staticClass:"success-dialog"},[s("div",{staticClass:"content"},[s("img",{attrs:{src:"static/img/success.png"}}),e._v(" "),s("div",{staticClass:"name"},[e._v(" 新增判断题成功")]),e._v(" "),e.sendMsgDisabled?s("div",{staticClass:"time"},[e._v(e._s(e.time+"s回到详情页")+">")]):e._e()]),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticStyle:{display:"inline",width:"43%"},attrs:{type:"primary"},on:{click:e.openAddInfo}},[e._v("再加一个")]),e._v(" "),s("el-button",{staticStyle:{display:"inline",width:"43%"},on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("知道了")])],1)])]),e._v(" "),s("div",{staticClass:"scoreAll"},[s("p",[s("span",{staticClass:"big"},[e._v(e._s(e.checkScore))]),e._v("\n\t\t\t\t/"),s("span",[e._v("100 ")])]),e._v(" "),s("p",[e._v("试卷分值")])])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"default"},[t("img",{attrs:{src:"static/img/not-add-default.png",alt:""}}),this._v(" "),t("div",{staticClass:"not-class"},[this._v("\n\t\t\t\t\t\t\t暂无相关信息\n\t\t\t\t\t\t")])])}]};var d=s("VU/8")(l,u,!1,function(e){s("c65K")},null,null);t.default=d.exports},TmV0:function(e,t,s){s("fZOM"),e.exports=s("FeBl").Object.values},Tsqi:function(e,t){},auoD:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("fZjL"),i=s.n(a),n=s("Xxa5"),r=s.n(n),o=s("exGp"),c=s.n(o),l={name:"MultipleChoice",props:{objMul:{type:Object}},data:function(){return{numVal:0,questKind:1,filterInput:"",allVal:"",subjectId:1,bankType:1,pageNo:1,scores:"",checkScore:0,allScores:0,tagTotal:"",editBtn:0,dataVal:"",checkVal:0,checkAll:!1,isIndeterminate:!0,showAdd:!1,dialogTableVisible:!1,time:3,tempEditId:"",sendMsgDisabled:!1,form:{name:"",token:"",resData:[{title:"",content:"",answers:!1},{title:"",content:"",answers:!1},{title:"",content:"",answers:!1},{title:"",content:"",answers:!1}]},itemList:[],questList:[],ansList:[],resData:[{}]}},methods:{goBackInfo:function(){var e={showPaperShow:!0,addPaperShow:!1};this.$emit("goBackInfo",e)},openAddInfo:function(){this.form.name="",this.form.resData.forEach(function(e,t){e.title="",e.content="",e.answers=!1}),this.editBtn=-1,this.showAdd=!0},filterBy:function(e,t){return 0===t.length?(this.tagTotal=e.length,this.resData):(e=e.filter(function(e){if(e.qcDesc.match(t))return e.qcDesc.match(t)}),this.tagTotal=e.length,e)},AddInfo:function(){var e=this;return c()(r.a.mark(function t(){var s,a,i,n,o,c;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s={accessToken:"",questKind:e.questKind,questDesc:"",questAnswer:"",itemList:[]},a=void 0,i=void 0,n=0,0,void 0,{},i=e.form.resData,i.length,!(e.form.name.length<5||e.form.name.length>37)){t.next=8;break}return e.dialog("题目描述字数不能少于5个且不能多于36个！"),t.abrupt("return",!1);case 8:if(s.accessToken=e.form.token,s.questDesc=e.form.name,i.forEach(function(e,t){if(1==e.answers&&n++,""==e.content)a=1;else{var i,r={};i=0==t?"A":1==t?"B":2==t?"C":3==t?"D":4==t?"E":5==t?"F":"无解",r.item=i,r.itemDesc=e.content,s.itemList.push(r),s.questAnswer+=e.answers+"ψ"}}),1!=a){t.next=14;break}return e.dialog("选项内容必填且还有答案"),t.abrupt("return",!1);case 14:if(!(n<2)){t.next=17;break}return e.dialog("请选择至少2个正确答案"),t.abrupt("return",!1);case 17:if(s.questAnswer=s.questAnswer.substring(0,s.questAnswer.length-1),-1==e.editBtn){t.next=38;break}return s.id=e.tempEditId,t.next=22,e.$axios.addKind(s);case 22:if(1e3!=(o=t.sent).code){t.next=29;break}e.successMsg("编辑成功!"),e.getList(),e.showAdd=!1,t.next=36;break;case 29:if(1100!==o.code){t.next=34;break}return e.dialog(o.message),t.abrupt("return",!1);case 34:return e.dialog("请联系管理员"),t.abrupt("return",!1);case 36:t.next=55;break;case 38:return t.next=40,e.$axios.addKind(s);case 40:if(1e3!=(c=t.sent).code){t.next=48;break}e.showAdd=!1,e.dialogTableVisible=!0,e.handleCheckedSingleChange(),e.getList(),t.next=55;break;case 48:if(1100!==c.code){t.next=53;break}return e.dialog(c.message),t.abrupt("return",!1);case 53:return e.dialog("请联系管理员"),t.abrupt("return",!1);case 55:return t.abrupt("return",!1);case 56:case"end":return t.stop()}},t,e)}))()},editAnswers:function(e){this.showAdd=!0,this.form.name=this.resData[e].qcDesc,this.tempEditId=this.resData[e].questId;var t=[];this.resData[e].arr.forEach(function(e,s){var a={};a.title=s,a.content=e.itemDesc,a.answers=e.answersl,t.push(a)}),this.form.resData=t,this.editBtn=e},addAnswers:function(){if(!(this.form.resData.length<6))return this.dialog("不能再添加了！"),!1;this.form.resData.push({title:"",content:"",answers:!1})},deleAnswers:function(e,t){var s=this;return c()(r.a.mark(function a(){var i,n;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i={questId:t},a.next=3,s.$axios.deleAnswers(i);case 3:if(1e3!==(n=a.sent).code){a.next=10;break}s.successMsg("删除题目成功!"),s.resData.splice(e,1),s.handleCheckedSingleChange(),a.next=17;break;case 10:if(1100!==n.code){a.next=15;break}return s.dialog(n.message),a.abrupt("return",!1);case 15:return s.dialog("请联系管理员"),a.abrupt("return",!1);case 17:case"end":return a.stop()}},a,s)}))()},closeAnswers:function(e){if(e<2)return this.dialog("保留前2个选项，不能再删了！"),!1;this.form.resData.splice(e,1)},onsearchHandle:function(){},handleCheckAllChange:function(e){this.checkAll?this.resData.forEach(function(e,t){e.checkedSingles=!0}):this.resData.forEach(function(e,t){e.checkedSingles=!1}),this.scoreFun()},handleCheckedSingleChange:function(e){this.scoreFun()},singleChange:function(){},keyUpFun:function(){},scoreFun:function(){var e=0,t=0,s=0,a=!0,i=Number(this.scores);this.allVal=this.resData.length,this.resData.forEach(function(e,n){return!0===e.checkedSingles?(t+=i,s++):a=!1,a}),e=this.objMul.scoresAll,this.checkAll=!!a,this.checkVal=s,this.allScores=e,this.checkScore=t},getList:function(){var e=this;return c()(r.a.mark(function t(){var s,a,n,o,c,l;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s={questKind:1},a=[],n=[],t.next=3,e.$axios.getKindList(s);case 3:if(1100!==(o=t.sent).code){t.next=9;break}return e.dialog(o.message),t.abrupt("return",!1);case 9:if(1e3!==o.code){t.next=19;break}if(0!=i()(o.data).length){t.next=13;break}return e.resData=[],t.abrupt("return",!1);case 13:c=o.data.itemList,e.questList=o.data.questList,e.questList.forEach(function(e,t){if((n=e.questAnswer.split("ψ")).length>0){var s=0,i={};i.questId=e.questId,i.qcDesc=e.qcDesc,i.score=e.score,i.isOwn=e.isOwn,i.arr=[],i.checkedSingles=!1,c.forEach(function(t,a){var r={};r.item=t.item,r.itemDesc=t.itemDesc,t.questId==e.questId&&(r.answersl="true"===n[s],i.arr.push(r),s++)}),s>0&&a.push(i)}}),e.resData=a,e.objMul.parentData.length>0&&(l=e.objMul.parentData,e.scores=e.objMul.scores,e.resData.forEach(function(e,t){e.checkedSingles=!1,l.forEach(function(t,s){e.questId===t.questId&&(e.checkedSingles=!0)})})),e.scoreFun();case 19:case"end":return t.stop()}},t,e)}))()},submitInfo:function(){var e=this.resData,t=[],s={};s.tit=this.questKind,e.forEach(function(e,s){!0===e.checkedSingles&&t.push(e)}),s.score=this.checkScore,s.resData=t,this.$emit("getPaperInfo",s)}},mounted:function(){0==localStorage.getItem("userType")?(this.form.token=localStorage.getItem("accessToken"),null!==this.form.token&&""!=this.form.token||this.$router.push({path:"/Login"})):(this.status="",this.form.token="",this.$router.push({path:"/Login"})),this.getList()},watch:{dialogTableVisible:function(e){if(e){var t=this;t.sendMsgDisabled=!0;var s=window.setInterval(function(){t.time--<=1&&(t.time=3,t.sendMsgDisabled=!1,t.dialogTableVisible=!1,window.clearInterval(s))},1e3)}}}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"MultipleChoice"},[s("Header",{attrs:{title:"多选题库"}}),e._v(" "),s("div",{staticStyle:{width:"50px",height:"50px",position:"relative","margin-top":"-50px"},on:{click:e.goBackInfo}}),e._v(" "),s("div",{staticClass:"headBox"},[s("h3",[e.hasQx("teach:quest:addKind")?s("span",{staticClass:"addTi",on:{click:e.openAddInfo}},[e._v("+")]):e._e(),e._v("每道多选题分数为"),s("input",{directives:[{name:"model",rawName:"v-model",value:e.scores,expression:"scores"}],attrs:{placeholder:""},domProps:{value:e.scores},on:{keyup:[e.scoreFun,e.keyUpFun],input:function(t){t.target.composing||(e.scores=t.target.value)}}}),e._v("分")])]),e._v(" "),s("div",{staticClass:"group-div"},[s("el-input",{staticClass:"input-with-select",attrs:{placeholder:"题目关键字","prefix-icon":"el-icon-search"},model:{value:e.filterInput,callback:function(t){e.filterInput=t},expression:"filterInput"}},[s("el-button",{attrs:{slot:"append"},on:{click:e.onsearchHandle},slot:"append"},[e._v("搜索")])],1)],1),e._v(" "),s("div",{staticClass:"selectBox"},[s("div",{staticClass:"contentBox"},[s("h3",[s("el-checkbox",{staticStyle:{"font-weight":"900"},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选("+e._s(e.checkVal)+"/"+e._s(e.allVal)+")")])],1),e._v(" "),e.tagTotal<=0?s("div",{staticClass:"noInfo"},[e._m(0)]):e._e(),e._v(" "),e._l(e.filterBy(e.resData,e.filterInput),function(t,a){return s("div",{key:a,staticClass:"timuBox"},[s("el-checkbox-group",{on:{change:e.handleCheckedSingleChange},model:{value:t.checkedSingles,callback:function(s){e.$set(t,"checkedSingles",s)},expression:"item.checkedSingles"}},[s("div",{staticClass:"timu"},[s("h4",[s("el-checkbox",{staticStyle:{display:"inline-block"},attrs:{checked:t.checkedSingles}},[e._v(e._s(a+1)+"、"+e._s(t.qcDesc))]),e._v(" "),1==t.isOwn?[s("span",{staticStyle:{float:"right"},on:{click:function(s){e.deleAnswers(a,t.questId)}}},[s("img",{attrs:{src:"static/img/dele.png"}})]),e._v(" "),s("span",{staticStyle:{float:"right"},on:{click:function(t){e.editAnswers(a)}}},[s("img",{attrs:{src:"static/img/edit.png"}})])]:e._e(),e._v(" "),s("span",{staticStyle:{float:"right",color:"#bbb","margin-right":"1%"}},[e._v(e._s(e.scores)+"分")])],2),e._v(" "),e._l(t.arr,function(t,a){return s("el-checkbox-group",{key:a,model:{value:t.answersl,callback:function(s){e.$set(t,"answersl",s)},expression:"itec.answersl"}},[s("el-checkbox",{attrs:{disabled:"",label:a},on:{change:e.singleChange}},[e._v(e._s(t.item)+"、"+e._s(t.itemDesc)+" ")])],1)})],2)])],1)})],2)]),e._v(" "),s("div",{staticClass:"selectBox subBox"},[s("el-row",[s("el-button",{attrs:{type:"primary"},on:{click:e.submitInfo}},[e._v("提交")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"多选题",visible:e.showAdd},on:{"update:visible":function(t){e.showAdd=t}}},[s("el-form",{attrs:{model:e.form}},[s("span",{staticStyle:{"font-size":"14px"}},[e._v("每题分数："),s("b",{staticStyle:{color:"red"}},[e._v(e._s(e.scores))]),e._v("分")]),e._v(" "),s("el-form-item",{attrs:{label:"题目描述"}},[s("el-input",{attrs:{maxlength:"20",type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入题目描述，最多36个字"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),s("div",[s("p",{staticStyle:{"font-size":"18px"}},[s("span",{staticStyle:{color:"#3DA2FE",float:"right"},on:{click:function(t){e.addAnswers()}}},[e._v("添加")]),e._v(" "),s("span",[e._v("选项（勾选口默认该选项为正确答案）")])]),e._v(" "),s("el-checkbox-group",e._l(e.form.resData,function(t,a){return s("div",{key:a},[s("el-checkbox-group",{model:{value:t.answers,callback:function(s){e.$set(t,"answers",s)},expression:"items.answers"}},[s("el-checkbox",{attrs:{label:a}},[e._v(e._s(0==a?"A":1==a?"B":2==a?"C":3==a?"D":4==a?"E":5==a?"F":""))]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"items.content"}],attrs:{placeholder:"答案"},domProps:{value:t.content},on:{input:function(s){s.target.composing||e.$set(t,"content",s.target.value)}}}),e._v(" "),s("i",{staticClass:"el-dialog__close el-icon el-icon-close closeBtn",on:{click:function(t){e.closeAnswers(a)}}})],1)],1)}))],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticStyle:{display:"inline",width:"43%"},attrs:{type:"primary"},on:{click:e.AddInfo}},[e._v("确 定")]),e._v(" "),s("el-button",{staticStyle:{display:"inline",width:"43%"},on:{click:function(t){e.showAdd=!1}}},[e._v("取 消")])],1)],1),e._v(" "),s("el-dialog",{attrs:{visible:e.dialogTableVisible,center:"","show-close":!1},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[s("div",{staticClass:"success-dialog"},[s("div",{staticClass:"content"},[s("img",{attrs:{src:"static/img/success.png"}}),e._v(" "),s("div",{staticClass:"name"},[e._v(" 新增多选题成功")]),e._v(" "),e.sendMsgDisabled?s("div",{staticClass:"time"},[e._v(e._s(e.time+"s回到详情页")+">")]):e._e()]),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticStyle:{display:"inline",width:"43%"},attrs:{type:"primary"},on:{click:e.openAddInfo}},[e._v("再加一个")]),e._v(" "),s("el-button",{staticStyle:{display:"inline",width:"43%"},on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("知道了")])],1)])]),e._v(" "),s("div",{staticClass:"scoreAll"},[s("p",[s("span",{staticClass:"big"},[e._v(e._s(e.checkScore))]),e._v("\n\t\t\t\t/"),s("span",[e._v("100 ")])]),e._v(" "),s("p",[e._v("试卷分值")])])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"default"},[t("img",{attrs:{src:"static/img/not-add-default.png",alt:""}}),this._v(" "),t("div",{staticClass:"not-class"},[this._v("\n\t\t\t\t\t\t\t暂无相关信息\n\t\t\t\t\t\t")])])}]};var d=s("VU/8")(l,u,!1,function(e){s("NDkj")},null,null);t.default=d.exports},"c/Tr":function(e,t,s){e.exports={default:s("5zde"),__esModule:!0}},c65K:function(e,t){},fBQ2:function(e,t,s){"use strict";var a=s("evD5"),i=s("X8DO");e.exports=function(e,t,s){t in e?a.f(e,t,i(0,s)):e[t]=s}},fZOM:function(e,t,s){var a=s("kM2E"),i=s("mbce")(!1);a(a.S,"Object",{values:function(e){return i(e)}})},fZjL:function(e,t,s){e.exports={default:s("jFbC"),__esModule:!0}},gRE1:function(e,t,s){e.exports={default:s("TmV0"),__esModule:!0}},i7h6:function(e,t){},jFbC:function(e,t,s){s("Cdx3"),e.exports=s("FeBl").Object.keys},mbce:function(e,t,s){var a=s("lktj"),i=s("TcQ7"),n=s("NpIQ").f;e.exports=function(e){return function(t){for(var s,r=i(t),o=a(r),c=o.length,l=0,u=[];c>l;)n.call(r,s=o[l++])&&u.push(e?[s,r[s]]:r[s]);return u}}},mvHQ:function(e,t,s){e.exports={default:s("qkKv"),__esModule:!0}},qkKv:function(e,t,s){var a=s("FeBl"),i=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},qyJz:function(e,t,s){"use strict";var a=s("+ZMJ"),i=s("kM2E"),n=s("sB3e"),r=s("msXi"),o=s("Mhyx"),c=s("QRG4"),l=s("fBQ2"),u=s("3fs2");i(i.S+i.F*!s("dY0y")(function(e){Array.from(e)}),"Array",{from:function(e){var t,s,i,d,h=n(e),f="function"==typeof this?this:Array,m=arguments.length,g=m>1?arguments[1]:void 0,p=void 0!==g,v=0,b=u(h);if(p&&(g=a(g,m>2?arguments[2]:void 0,2)),void 0==b||f==Array&&o(b))for(s=new f(t=c(h.length));t>v;v++)l(s,v,p?g(h[v],v):h[v]);else for(d=b.call(h),s=new f;!(i=d.next()).done;v++)l(s,v,p?r(d,g,[i.value,v],!0):i.value);return s.length=v,s}})},sI8T:function(e,t){},sUAl:function(e,t,s){"use strict";var a={name:"tabNav",props:{tabNavArr:Array,tabVal:Number},data:function(){return{tabValue:1}},methods:{tabChange:function(e){this.tabValue=e,this.$emit("tabChange",e)}},mounted:function(){this.tabValue=this.tabVal}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"navBox"},[s("div",{staticClass:"nav"},e._l(e.tabNavArr,function(t,a){return s("div",{key:a,staticClass:"nav-item",class:e.tabValue===a+1?"active":"",on:{click:function(t){e.tabChange(a+1)}}},[e._v(e._s(t))])}))])},staticRenderFns:[]};var n=s("VU/8")(a,i,!1,function(e){s("00oF")},"data-v-41bfffdc",null);t.a=n.exports},uqUo:function(e,t,s){var a=s("kM2E"),i=s("FeBl"),n=s("S82l");e.exports=function(e,t){var s=(i.Object||{})[e]||Object[e],r={};r[e]=t(s),a(a.S+a.F*n(function(){s(1)}),"Object",r)}},xx8U:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("fZjL"),i=s.n(a),n=s("Xxa5"),r=s.n(n),o=s("exGp"),c=s.n(o),l={name:"Single",props:{objSin:{type:Object}},data:function(){return{filterInput:"",allVal:"",scores:"",checkScore:0,allScores:0,editBtn:0,tempEditId:"",dataVal:"",keyNums:4,checkVal:0,checkAll:!1,questKind:0,isIndeterminate:!0,showAdd:!1,dialogTableVisible:!1,time:3,tagTotal:"",sendMsgDisabled:!1,form:{token:"",subjectId:2,radio:"",name:"",answers:[{title:"0",content:""},{title:"1",content:""},{title:"2",content:""},{title:"3",content:""}]},resData:[{}],showPaperShow:!0}},methods:{goBackInfo:function(){var e={showPaperShow:!0,addPaperShow:!1};this.$emit("goBackInfo",e)},openAddInfo:function(){this.form.name="",this.form.radio="",this.form.answers.forEach(function(e,t){e.title=t,e.content=""}),this.editBtn=-1,this.showAdd=!0},filterBy:function(e,t){return 0===t.length?(this.tagTotal=e.length,this.resData):(e=e.filter(function(e){if(e.qcDesc.match(t))return e.qcDesc.match(t)}),this.tagTotal=e.length,e)},AddInfo:function(){var e=this;return c()(r.a.mark(function t(){var s,a,i,n,o;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s={accessToken:"",questKind:e.questKind,questDesc:"",questAnswer:"",itemList:[]},a=void 0,i=[],!(e.form.name.length<5||e.form.name.length>37)){t.next=6;break}return e.dialog("题目描述字数不能少于5个且不能多于36个！"),t.abrupt("return",!1);case 6:if(""!==e.form.radio){t.next=11;break}return e.dialog("请选个正确答案"),t.abrupt("return",!1);case 11:if(s.questDesc=e.form.name,e.form.answers.forEach(function(e,t,s){if(""==e.content)a=1;else{var n,r={};n=0==t?"A":1==t?"B":2==t?"C":3==t?"D":4==t?"E":5==t?"F":"无解",r.item=n,r.itemDesc=e.content,i.push(r)}}),1!=a){t.next=16;break}return e.dialog("选项内容必填"),t.abrupt("return",!1);case 16:if(s.itemList=i,s.questAnswer=e.form.radio,s.accessToken=e.form.token,-1==e.editBtn){t.next=39;break}return s.id=e.tempEditId,t.next=23,e.$axios.addKind(s);case 23:if(1e3!=(n=t.sent).code){t.next=30;break}e.successMsg("编辑成功!"),e.getList(),e.showAdd=!1,t.next=37;break;case 30:if(1100!==n.code){t.next=35;break}return e.dialog(n.message),t.abrupt("return",!1);case 35:return e.dialog("请联系管理员"),t.abrupt("return",!1);case 37:t.next=56;break;case 39:return t.next=41,e.$axios.addKind(s);case 41:if(1e3!=(o=t.sent).code){t.next=49;break}e.showAdd=!1,e.dialogTableVisible=!0,e.handleCheckedSingleChange(),e.getList(),t.next=56;break;case 49:if(1100!==o.code){t.next=54;break}return e.dialog(o.message),t.abrupt("return",!1);case 54:return e.dialog("请联系管理员"),t.abrupt("return",!1);case 56:return t.abrupt("return",!1);case 57:case"end":return t.stop()}},t,e)}))()},editAnswers:function(e){this.showAdd=!0,this.form.name=this.resData[e].qcDesc,this.form.radio=this.resData[e].answers,this.tempEditId=this.resData[e].questId;var t=[];this.resData[e].arr.forEach(function(e,s){var a={};a.title=s,a.content=e.itemDesc,t.push(a)}),this.form.answers=t,this.editBtn=e},addAnswers:function(){var e,t={title:"",content:""};if(e=this.keyNums,t.title=e,this.keyNums++,!(this.form.answers.length<6))return this.dialog("不能再添加了！"),!1;this.form.answers.push(t)},deleAnswers:function(e,t){var s=this;return c()(r.a.mark(function a(){var i,n;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i={questId:t},a.next=3,s.$axios.deleAnswers(i);case 3:if(1e3!==(n=a.sent).code){a.next=10;break}s.successMsg("删除题目成功!"),s.resData.splice(e,1),s.handleCheckedSingleChange(),a.next=17;break;case 10:if(1100!==n.code){a.next=15;break}return s.dialog(n.message),a.abrupt("return",!1);case 15:return s.dialog("请联系管理员"),a.abrupt("return",!1);case 17:case"end":return a.stop()}},a,s)}))()},closeAnswers:function(e){if(e<2)return this.dialog("保留前2个选项，不能再删了！"),!1;this.form.radio="",this.form.answers.splice(e,1),console.log(this.form)},onsearchHandle:function(){},handleCheckAllChange:function(e){this.checkAll?this.resData.forEach(function(e,t){e.checkedSingles=!0}):this.resData.forEach(function(e,t){e.checkedSingles=!1}),this.scoreFun()},handleCheckedSingleChange:function(e){this.scoreFun()},scoreFun:function(){var e=0,t=0,s=!0,a=Number(this.scores);this.allVal=this.resData.length,this.resData.forEach(function(i,n){return!0===i.checkedSingles?(e+=a,t++):s=!1,t}),this.allScores=this.objSin.scoresAll,this.checkAll=!!s,this.checkVal=t,this.checkScore=e},getList:function(){var e=this;return c()(r.a.mark(function t(){var s,a,n,o,c,l,u;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s={questKind:e.questKind},a=[],n=[],o=e.checkAll,t.next=3,e.$axios.getKindList(s);case 3:if(1100!==(c=t.sent).code){t.next=9;break}return e.dialog(c.message),t.abrupt("return",!1);case 9:if(1e3!==c.code){t.next=19;break}if(0!=i()(c.data).length){t.next=13;break}return e.resData=[],t.abrupt("return",!1);case 13:l=c.data.itemList,e.questList=c.data.questList,e.questList.forEach(function(e,t){if((n=e.questAnswer).length>0){var s=0,i={};i.questId=e.questId,i.qcDesc=e.qcDesc,i.score=e.score,i.isOwn=e.isOwn,i.arr=[],i.answers=Number(n),i.checkedSingles=o,l.forEach(function(t,a){var n={};n.item=t.item,n.itemDesc=t.itemDesc,t.questId==e.questId&&(i.arr.push(n),s++)}),s>0&&a.push(i)}}),e.resData=a,e.objSin.parentData.length>0?(u=e.objSin.parentData,e.scores=e.objSin.scores,e.resData.forEach(function(e,t){e.checkedSingles=!1,u.forEach(function(t,s){e.questId===t.questId&&(e.checkedSingles=!0)})}),e.carculate(2)):e.carculate(),e.scoreFun();case 19:case"end":return t.stop()}},t,e)}))()},carculate:function(e){return!1},submitInfo:function(){var e=this.resData,t=[],s={};s.tit=this.questKind,e.forEach(function(e,s){!0===e.checkedSingles&&t.push(e)}),s.score=this.checkScore,s.resData=t,this.$emit("getPaperInfo",s)}},mounted:function(){0==localStorage.getItem("userType")?(this.form.token=localStorage.getItem("accessToken"),null!==this.form.token&&""!=this.form.token||this.$router.push({path:"/Login"})):(this.status="",this.form.token="",this.$router.push({path:"/Login"})),this.getList()},watch:{dialogTableVisible:function(e){if(e){var t=this;t.sendMsgDisabled=!0;var s=window.setInterval(function(){t.time--<=1&&(t.time=3,t.sendMsgDisabled=!1,t.dialogTableVisible=!1,window.clearInterval(s))},1e3)}}}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"Single"},[s("Header",{attrs:{title:"单选题库"}}),e._v(" "),s("div",{staticStyle:{width:"50px",height:"50px",position:"relative","margin-top":"-50px"},on:{click:e.goBackInfo}}),e._v(" "),s("div",{staticClass:"headBox"},[s("h3",[e.hasQx("teach:quest:addKind")?s("span",{staticClass:"addTi",on:{click:e.openAddInfo}},[e._v("+")]):e._e(),e._v("每道单选题分数为"),s("input",{directives:[{name:"model",rawName:"v-model",value:e.scores,expression:"scores"}],attrs:{placeholder:""},domProps:{value:e.scores},on:{keyup:e.scoreFun,input:function(t){t.target.composing||(e.scores=t.target.value)}}}),e._v("分")])]),e._v(" "),s("div",{staticClass:"group-div"},[s("el-input",{staticClass:"input-with-select",attrs:{placeholder:"题目关键字","prefix-icon":"el-icon-search"},model:{value:e.filterInput,callback:function(t){e.filterInput=t},expression:"filterInput"}},[s("el-button",{attrs:{slot:"append"},on:{click:e.onsearchHandle},slot:"append"},[e._v("搜索")])],1)],1),e._v(" "),s("div",{staticClass:"selectBox"},[s("div",{staticClass:"contentBox"},[s("h3",[s("el-checkbox",{on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选("+e._s(e.checkVal)+"/"+e._s(e.allVal)+")")])],1),e._v(" "),e.tagTotal<=0?s("div",{staticClass:"noInfo"},[e._m(0)]):e._e(),e._v(" "),e._l(e.filterBy(e.resData,e.filterInput),function(t,a){return s("div",{key:a,staticClass:"timuBox"},[s("el-checkbox-group",{on:{change:e.handleCheckedSingleChange},model:{value:t.checkedSingles,callback:function(s){e.$set(t,"checkedSingles",s)},expression:"item.checkedSingles"}},[s("div",{staticClass:"timu"},[s("h4",[s("el-checkbox",{staticStyle:{display:"inline-block"},attrs:{checked:t.checkedSingles}},[e._v(e._s(a+1)+"、"+e._s(t.qcDesc))]),e._v(" "),1==t.isOwn?[s("span",{staticStyle:{float:"right"},on:{click:function(s){e.deleAnswers(a,t.questId)}}},[s("img",{attrs:{src:"static/img/dele.png"}})]),e._v(" "),s("span",{staticStyle:{float:"right"},on:{click:function(t){e.editAnswers(a)}}},[s("img",{attrs:{src:"static/img/edit.png"}})])]:e._e(),e._v(" "),s("span",{staticStyle:{float:"right",color:"#bbb","margin-right":"1%"}},[e._v(e._s(e.scores)+"分")])],2),e._v(" "),e._l(t.arr,function(a,i){return s("el-radio-group",{key:i,model:{value:t.answers,callback:function(s){e.$set(t,"answers",s)},expression:"item.answers"}},[s("el-radio",{attrs:{label:i,disabled:""}},[e._v(e._s(a.item)+"、"+e._s(a.itemDesc))])],1)})],2)])],1)})],2)]),e._v(" "),s("div",{staticClass:"selectBox subBox"},[s("el-row",[s("el-button",{attrs:{type:"primary"},on:{click:e.submitInfo}},[e._v("提交")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"单选题",visible:e.showAdd},on:{"update:visible":function(t){e.showAdd=t}}},[s("el-form",{attrs:{model:e.form}},[s("el-form-item",{attrs:{label:"题目描述"}},[s("el-input",{attrs:{maxlength:"20",type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入题目描述，最多36个字"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),s("div",[s("p",{staticStyle:{"font-size":"18px"}},[s("span",{staticStyle:{color:"#3DA2FE",float:"right"},on:{click:function(t){e.addAnswers()}}},[e._v("添加")]),e._v(" "),s("span",[e._v("选项（勾选"),s("b",{staticStyle:{"font-size":"30px","font-weight":"300"}},[e._v("o")]),e._v("默认该选项为正确答案）")])]),e._v(" "),s("el-radio-group",{model:{value:e.form.radio,callback:function(t){e.$set(e.form,"radio",t)},expression:"form.radio"}},e._l(e.form.answers,function(t,a){return s("div",{key:a},[s("el-radio",{attrs:{label:a}},[e._v(e._s(0==a?"A":1==a?"B":2==a?"C":3==a?"D":4==a?"E":5==a?"F":""))]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"items.content"}],attrs:{placeholder:"答案"},domProps:{value:t.content},on:{input:function(s){s.target.composing||e.$set(t,"content",s.target.value)}}}),e._v(" "),s("i",{staticClass:"el-dialog__close el-icon el-icon-close closeBtn",on:{click:function(t){e.closeAnswers(a)}}})],1)}))],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticStyle:{width:"47%",display:"inline"},attrs:{type:"primary"},on:{click:e.AddInfo}},[e._v("确 定")]),e._v(" "),s("el-button",{staticStyle:{width:"47%",display:"inline"},on:{click:function(t){e.showAdd=!1}}},[e._v("取 消")])],1)],1),e._v(" "),s("el-dialog",{attrs:{visible:e.dialogTableVisible,center:"","show-close":!1},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[s("div",{staticClass:"success-dialog"},[s("div",{staticClass:"content"},[s("img",{attrs:{src:"static/img/success.png"}}),e._v(" "),s("div",{staticClass:"name"},[e._v(" 新增单选题成功")]),e._v(" "),e.sendMsgDisabled?s("div",{staticClass:"time"},[e._v(e._s(e.time+"s回到详情页")+">")]):e._e()]),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticStyle:{width:"47%",display:"inline"},attrs:{type:"primary"},on:{click:e.openAddInfo}},[e._v("再加一个")]),e._v(" "),s("el-button",{staticStyle:{width:"47%",display:"inline"},on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("知道了")])],1)])]),e._v(" "),s("div",{staticClass:"scoreAll"},[s("p",[s("span",{staticClass:"big"},[e._v(e._s(e.checkScore))]),e._v("\n\t\t\t\t/"),s("span",[e._v("100 ")])]),e._v(" "),s("p",[e._v("试卷分值")])])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"default"},[t("img",{attrs:{src:"static/img/not-add-default.png",alt:""}}),this._v(" "),t("div",{staticClass:"not-class"},[this._v("\n\t\t\t\t\t\t\t暂无相关信息\n\t\t\t\t\t\t")])])}]};var d=s("VU/8")(l,u,!1,function(e){s("i7h6")},null,null);t.default=d.exports}});