webpackJsonp([78],{"+Xcu":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Xxa5"),i=a.n(s),n=a("exGp"),r=a.n(n),l={name:"EntryTestData",data:function(){return{form:{courseId:"",teacherId:"",phenomenon:"",usedTime:"",testItem:[],summary:"",maintainceList:[],partsList:[],result:""},submit:"",digList:[],testData:[]}},methods:{add:function(t){"testItem"===t?this.testData.push({orderNum:"0",sysName:"自主添加检测项目",testItem:"",dataValue:""}):"maintainceList"===t?this.form.maintainceList.push({orderNum:"0",fixItem:""}):"partsList"===t&&this.form.partsList.push({orderNum:"0",partName:"",partNum:"",partUnit:""})},deleSD:function(t,e){t.splice(e,1)},changeCheckox:function(t){this.val=t},goBack:function(){this.$router.back(-1)},DitAdd:function(){var t=this;return r()(i.a.mark(function e(){var a,s,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t,t.digList.forEach(function(t){t.data.forEach(function(t){var e="";e=Array.isArray(t.dataValue)?0===t.dataValue.length?"正常":t.dataValue.join(","):t.dataValue,t.unit&&(e+=t.unit),a.form.testItem.push({orderNum:"0",sysName:t.sysName,testItem:t.itemName,dataValue:e})})}),t.form.testItem=t.form.testItem.concat(t.testData),t.form.teacherId=t.$route.query.teacherId,t.form.courseId=t.$route.query.courseId,t.form.phenomenon=t.$route.query.phenomenon,t.form.usedTime=String(Math.round(((new Date).getTime()-t.startTime)/1e3)),s=t.form,""!==t.form.summary){e.next=11;break}return t.dialog("诊断思路与总结不能为空"),e.abrupt("return",!1);case 11:return e.next=13,t.$axios.DitAdd(s);case 13:1e3===(n=e.sent).code?(t.$router.push("DataDiagnosis"),t.successMsg("操作成功")):t.dialog(n.message);case 15:case"end":return e.stop()}},e,t)}))()},getDitItemList:function(){var t=this;return r()(i.a.mark(function e(){var a,s,n,r,l,o,c,u,d,m,p,f,v,h;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.$route.query.subjectId,s={subjectId:a,faultId:t.$route.query.phenomenon},t.startTime=(new Date).getTime(),a){e.next=5;break}return e.abrupt("return");case 5:if(!t.hasQx("stu:dig:itemList")){e.next=43;break}return e.next=8,t.$axios.getDitItemList(s);case 8:if(1e3!==(n=e.sent).code||!n.data){e.next=36;break}for(r={},l=n.data.itemList,o=n.data.optionData,c=0,u=l.length;c<u;c++)for(l[c].optionValue=[],0==l[c].type||3==l[c].type?l[c].dataValue="":1==l[c].type&&(l[c].dataValue=[]),d=0;d<o.length;d++)l[c].itemId===o[d].itemId&&l[c].optionValue.push({optionName:o[d].optionName});m=0,p=l.length;case 15:if(!(m<p)){e.next=34;break}if(f=l[m],r[f.sysName]){e.next=22;break}t.digList.push({sysName:f.sysName,data:[f]}),r[f.sysName]=f,e.next=31;break;case 22:v=0;case 23:if(!(v<t.digList.length)){e.next=31;break}if((h=t.digList[v]).sysName!=f.sysName){e.next=28;break}return h.data.push(f),e.abrupt("break",31);case 28:v++,e.next=23;break;case 31:m++,e.next=15;break;case 34:e.next=41;break;case 36:if(1100!==n.code){e.next=40;break}return e.abrupt("return");case 40:t.dialog(n.message);case 41:e.next=44;break;case 43:t.dialog("您无权进行该操作");case 44:case"end":return e.stop()}},e,t)}))()}},mounted:function(){this.getDitItemList()},computed:{digListCopy:function(){return this.digList}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"entry"},[a("Header",{attrs:{title:"录入检测数据"},on:{goBack:t.goBack}}),t._l(t.digList,function(e,s){return a("div",{key:s,staticClass:"module"},[a("div",{staticClass:"title"},[t._v(t._s(e.sysName))]),a("hr"),t._l(e.data,function(e,s){return a("div",{key:s,staticClass:"items-row"},[a("div",{staticClass:"flex-auto"},[t._v(t._s(e.itemName))]),0==e.type?a("div",{staticClass:"flex-1"},[a("el-radio-group",{model:{value:e.dataValue,callback:function(a){t.$set(e,"dataValue",a)},expression:"item.dataValue"}},t._l(e.optionValue,function(e,s){return a("el-radio",{key:s,attrs:{label:e.optionName}},[t._v(t._s(e.optionName))])}))],1):1==e.type?a("div",{staticClass:"flex-1"},[a("el-checkbox-group",{model:{value:e.dataValue,callback:function(a){t.$set(e,"dataValue",a)},expression:"item.dataValue"}},t._l(e.optionValue,function(e,s){return a("el-checkbox",{key:e.optionName,attrs:{label:e.optionName}},[t._v(t._s(e.optionName))])}))],1):3==e.type?a("div",{staticClass:"flex-1"},[a("el-input",{attrs:{"suffix-icon":"item.unit"},model:{value:e.dataValue,callback:function(a){t.$set(e,"dataValue",a)},expression:"item.dataValue"}},[a("template",{slot:"append"},[t._v(t._s(e.unit))])],2)],1):t._e()])})],2)}),a("div",{staticClass:"module"},[a("div",{staticClass:"title"},[t._v("自主添加检测项目")]),a("div",{staticClass:"add",on:{click:function(e){t.add("testItem")}}},[t._v("添加")]),a("hr"),t._l(t.testData,function(e,s){return a("div",{key:s,staticClass:"items-column"},[a("el-input",{attrs:{placeholder:"检测项目"},model:{value:e.testItem,callback:function(a){t.$set(e,"testItem",a)},expression:"items.testItem"}}),a("el-input",{attrs:{placeholder:"数据"},model:{value:e.dataValue,callback:function(a){t.$set(e,"dataValue",a)},expression:"items.dataValue"}}),a("div",{staticClass:"dele",on:{click:function(e){t.deleSD(t.testData,s)}}},[a("img",{attrs:{src:"static/img/dele-item.png"}})])],1)})],2),a("div",{staticClass:"module"},[a("div",{staticClass:"title"},[t._v("诊断结果")]),a("hr"),a("div",{staticClass:"items-column"},[a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入诊断结果"},model:{value:t.form.result,callback:function(e){t.$set(t.form,"result",e)},expression:"form.result"}})],1)]),a("div",{staticClass:"module"},[a("div",{staticClass:"title"},[t._v("维修方式")]),a("hr"),a("div",{staticClass:"card"},[a("div",{staticClass:"nav"},[a("div",{staticClass:"title-left"},[t._v("维修项目")]),a("div",{staticClass:"add-right",on:{click:function(e){t.add("maintainceList")}}},[t._v("添加")])]),t._l(t.form.maintainceList,function(e,s){return a("div",{staticClass:"items-column"},[a("el-input",{attrs:{placeholder:"维修项目"},model:{value:e.fixItem,callback:function(a){t.$set(e,"fixItem",a)},expression:"items.fixItem"}}),a("div",{staticClass:"dele",on:{click:function(e){t.deleSD(t.form.maintainceList,s)}}},[a("img",{attrs:{src:"static/img/dele-item.png"}})])],1)}),a("div",{staticClass:"nav"},[a("div",{staticClass:"title-left"},[t._v("配件耗材")]),a("div",{staticClass:"add-right",on:{click:function(e){t.add("partsList")}}},[t._v("添加")])]),t._m(0),t._l(t.form.partsList,function(e,s){return a("div",{key:s,staticClass:"partsList"},[a("el-input",{attrs:{placeholder:"配件耗材"},model:{value:e.partName,callback:function(a){t.$set(e,"partName",a)},expression:"items.partName"}},[t._v("名称")]),a("el-input",{model:{value:e.partNum,callback:function(a){t.$set(e,"partNum",a)},expression:"items.partNum"}},[t._v("数量")]),a("el-input",{model:{value:e.partUnit,callback:function(a){t.$set(e,"partUnit",a)},expression:"items.partUnit"}},[t._v("单位")]),a("div",{staticClass:"dele",on:{click:function(e){t.deleSD(t.form.partsList,s)}}},[a("img",{attrs:{src:"static/img/dele-item.png"}})])],1)})],2)]),a("div",{staticClass:"module"},[a("div",{staticClass:"title asterisk"},[t._v("诊断思路与总结")]),a("hr"),a("div",{staticClass:"items-column"},[a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"诊断思路与总结"},model:{value:t.form.summary,callback:function(e){t.$set(t.form,"summary",e)},expression:"form.summary"}})],1)]),t.hasQx("stu:dig:add")?a("div",{staticClass:"submit"},[a("el-button",{attrs:{type:"primary"},on:{click:t.DitAdd},model:{value:t.submit,callback:function(e){t.submit=e},expression:"submit"}},[t._v("提交")])],1):t._e()],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"nav-text"},[e("div",{staticClass:"name"},[this._v("名称")]),e("div",{staticClass:"number"},[this._v("数量")]),e("div",{staticClass:"company"},[this._v("单位")])])}]};var c=a("VU/8")(l,o,!1,function(t){a("zUFI")},null,null);e.default=c.exports},zUFI:function(t,e){}});