webpackJsonp([29],{"5QnD":function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("Xxa5"),a=t.n(n),c=t("exGp"),i=t.n(c),s=t("mvHQ"),d=t.n(s),o=t("woOf"),u=t.n(o),l={name:"SelectCarModels",data:function(){return{carBrandObj:{currentLetter:"A",letterArr:[],cacheBrandList:[],renderList:[{brandId:"",brandName:"",icoName:"ad_ico",initial:""}],currentIndex:0},carLineObj:{renderList:[{lineId:"",lineName:""}],currentIndex:0},carCcObj:{renderList:[{cc:""}],currentIndex:0,unit:"T",unitList:["T","L"],definedUnit:"",errorText:""},carProduceYearObj:{renderList:[{produceYear:""}],currentIndex:0,selectYear:""},selectCarInfo:{car_brand:"",icoName:"",car_line:"",line_id:"",car_cc:"",car_produceYear:""},pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}}}},watch:{},computed:{btnText:function(){var e=this.carBrandObj.renderList[this.carBrandObj.currentIndex],r=this.carLineObj.renderList[this.carLineObj.currentIndex],t=this.carCcObj.renderList[this.carCcObj.currentIndex],n=this.carProduceYearObj.renderList[this.carProduceYearObj.currentIndex];return this.selectCarInfo={car_brand:e.brandName,icoName:e.icoName,car_line:r.lineName,line_id:r.lineId,car_cc:t.cc||"",car_produceYear:n.produceYear||""},"已选【 "+e.brandName+"  "+r.lineName+"  "+(n.produceYear||this.carProduceYearObj.selectYear)+" 年款 】查询"}},methods:{goBack:function(){this.$router.back(-1)},onIntegratedQuery:function(){var e=u()({},this.selectCarInfo);if(console.log(e),""==e.car_cc){if(""==this.carCcObj.definedUnit)return this.dialog("请输入排量"),!1;e.car_cc=this.carCcObj.definedUnit+this.carCcObj.unit}if(""==e.car_produceYear)return this.dialog("请选择生产年份"),!1;sessionStorage.setItem("selectCarInfo",d()(e)),this.$router.push({path:"./IntegratedQuery"})},getBrandList:function(){var e=this;return i()(a.a.mark(function r(){var t;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$axios.getBrandList();case 2:2e4==(t=r.sent).code&&(e.carBrandObj.cacheBrandList=t.data,e.convertData(t.data),e.getLineList());case 4:case"end":return r.stop()}},r,e)}))()},getLineList:function(){var e=this;return i()(a.a.mark(function r(){var t,n;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.getParams(["brand"]),r.next=3,e.$axios.getLineList(t);case 3:2e4==(n=r.sent).code&&(e.carLineObj.renderList=n.data,e.getCcList());case 5:case"end":return r.stop()}},r,e)}))()},getCcList:function(){var e=this;return i()(a.a.mark(function r(){var t,n,c;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.getParams(["brand","line"]),r.next=3,e.$axios.getCcList(t);case 3:2e4==(n=r.sent).code&&((c=n.data).length>1&&(c=c.filter(function(e,r){return e.cc})),e.carCcObj.renderList=c,e.getProduceYearList());case 5:case"end":return r.stop()}},r,e)}))()},getProduceYearList:function(){var e=this;return i()(a.a.mark(function r(){var t,n,c,i;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if((t=e.getParams()).cc){r.next=9;break}if(""!=e.carCcObj.definedUnit){r.next=6;break}return r.abrupt("return",!1);case 6:n="",n=e.carCcObj.definedUnit+e.carCcObj.unit,t.cc=n;case 9:return r.next=11,e.$axios.getProduceYearList(t);case 11:2e4==(c=r.sent).code&&((i=c.data).length>1&&(i=i.filter(function(e,r){return e.produceYear})),e.carProduceYearObj.renderList=i);case 13:case"end":return r.stop()}},r,e)}))()},getParams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["brand","line","cc"],r={};if(e.indexOf("brand")>-1){var t=this.carBrandObj.renderList[this.carBrandObj.currentIndex];r.brandId=t.brandId}if(e.indexOf("line")>-1){var n=this.carLineObj.renderList[this.carLineObj.currentIndex];r.lineId=n.lineId}if(e.indexOf("cc")>-1){var a=this.carCcObj.renderList[this.carCcObj.currentIndex];r.cc=a.cc}return r},convertData:function(e){var r={},t=[];for(var n in e.map(function(e,n){"ZT"!=e.initial&&(r.hasOwnProperty(e.initial)||(r[e.initial]=[],t.push(e.initial)),r[e.initial].push(e))}),r)if(n==this.carBrandObj.currentLetter){this.carBrandObj.renderList=r[n];break}this.carBrandObj.letterArr=t.sort()},onChangeLetter:function(e){if(this.carBrandObj.currentLetter==e)return!1;this.resetConfi(),this.carBrandObj.currentLetter=e,this.getBrandList()},onSelectCarBrand:function(e){if(this.carBrandObj.currentIndex==e)return!1;this.resetConfi(["line","cc","produceYear"]),this.carBrandObj.currentIndex=e,this.getLineList()},onSelectCarLine:function(e){if(this.carLineObj.currentIndex==e)return!1;this.resetConfi(["cc","produceYear"]),this.carLineObj.currentIndex=e,this.getCcList()},onSelectCarCc:function(e){if(this.carCcObj.currentIndex==e)return!1;this.resetConfi(["produceYear"]),this.carCcObj.currentIndex=e,this.getProduceYearList()},onSelectCarProduceYear:function(e){if(this.carProduceYearObj.currentIndex==e)return!1;this.carProduceYearObj.currentIndex=e},resetConfi:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["brand","line","cc","produceYear"];e.indexOf("brand")>-1&&(this.carBrandObj.renderList=[{brandId:"",brandName:"",icoName:"ad_ico",initial:""}],this.carBrandObj.currentIndex=0),e.indexOf("line")>-1&&(this.carLineObj.renderList=[{lineId:"",lineName:""}],this.carLineObj.currentIndex=0),e.indexOf("cc")>-1&&(this.carCcObj.renderList=[{cc:""}],this.carCcObj.currentIndex=0),e.indexOf("produceYear")>-1&&(this.carProduceYearObj.renderList=[{produceYear:""}],this.carProduceYearObj.currentIndex=0)},onChangeUnit:function(e){this.carCcObj.unit=e},onEnsureUnit:function(){if(""==this.carCcObj.definedUnit)return this.dialog("请输入排量"),!1;this.selectCarInfo.car_cc=this.carCcObj.definedUnit+this.carCcObj.unit,this.getProduceYearList()},onDateChange:function(e){this.selectCarInfo.car_produceYear=e}},mounted:function(){this.getBrandList()}},b={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"selectCarModels"},[t("Header",{attrs:{title:"选择车型"},on:{goBack:e.goBack}}),t("div",{staticClass:"scroll-div"},[t("div",{staticClass:"item"},[t("div",{staticClass:"title-div"},[e._v("车系")]),t("div",{staticClass:"carInfo-div"},[t("div",{staticClass:"sort-letter"},e._l(e.carBrandObj.letterArr,function(r,n){return t("span",{key:n,class:r==e.carBrandObj.currentLetter?"active":"",on:{click:function(t){e.onChangeLetter(r)}}},[e._v(e._s(r)+" ")])})),t("div",{staticClass:"sort-brand"},e._l(e.carBrandObj.renderList,function(r,n){return t("div",{key:n,staticClass:"group-div",class:n==e.carBrandObj.currentIndex?"active":"",on:{click:function(r){e.onSelectCarBrand(n)}}},[t("p",[t("img",{attrs:{src:"https://www.wanguoqiche.com/files/logo/"+r.icoName+".jpg"}})]),t("p",[e._v(e._s(r.brandName))])])}))])]),t("div",{staticClass:"item"},[t("div",{staticClass:"title-div"},[e._v("车型")]),t("div",{staticClass:"carInfo-div"},[t("div",{staticClass:"sort-brand"},e._l(e.carLineObj.renderList,function(r,n){return t("div",{key:n,staticClass:"group-div",class:n==e.carLineObj.currentIndex?"active":"",on:{click:function(r){e.onSelectCarLine(n)}}},[e._v(e._s(r.lineName))])}))])]),t("div",{staticClass:"item"},[t("div",{staticClass:"title-div"},[e._v("排量")]),t("div",{staticClass:"carInfo-div"},[e.carCcObj.renderList.length>1||e.carCcObj.renderList[0].cc?t("div",{staticClass:"sort-brand"},e._l(e.carCcObj.renderList,function(r,n){return t("div",{key:n,staticClass:"group-div",class:n==e.carCcObj.currentIndex?"active":"",on:{click:function(r){e.onSelectCarCc(n)}}},[e._v(e._s(r.cc))])})):t("div",{staticClass:"sort-input"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.carCcObj.definedUnit,expression:"carCcObj.definedUnit"}],staticClass:"el-input__inner",attrs:{type:"text",placeholder:"请输入排量"},domProps:{value:e.carCcObj.definedUnit},on:{focus:function(r){e.carCcObj.errorText=""},input:function(r){r.target.composing||e.$set(e.carCcObj,"definedUnit",r.target.value)}}}),e.carCcObj.errorText?t("div",{staticClass:"error"},[e._v(e._s(e.carCcObj.errorText))]):e._e(),t("div",{staticClass:"unit"},e._l(e.carCcObj.unitList,function(r,n){return t("span",{class:r==e.carCcObj.unit?"active":"",on:{click:function(t){e.onChangeUnit(r)}}},[e._v(e._s(r))])})),t("el-button",{attrs:{type:"primary"},on:{click:e.onEnsureUnit}},[e._v("确定")])],1)])]),t("div",{staticClass:"item"},[t("div",{staticClass:"title-div"},[e._v("年款")]),t("div",{staticClass:"carInfo-div"},[e.carProduceYearObj.length>1||e.carProduceYearObj.renderList[0].produceYear?t("div",{staticClass:"sort-brand"},e._l(e.carProduceYearObj.renderList,function(r,n){return t("div",{key:n,staticClass:"group-div",class:n==e.carProduceYearObj.currentIndex?"active":"",on:{click:function(r){e.onSelectCarProduceYear(n)}}},[e._v(e._s(r.produceYear))])})):t("div",{staticClass:"sort-input"},[t("el-date-picker",{attrs:{"picker-options":e.pickerOptions,"value-format":"yyyy",type:"year",placeholder:"选择年款"},on:{change:e.onDateChange},model:{value:e.carProduceYearObj.selectYear,callback:function(r){e.$set(e.carProduceYearObj,"selectYear",r)},expression:"carProduceYearObj.selectYear"}})],1)])])]),t("FixedButton",{attrs:{buttonText:e.btnText},on:{listenToChildEvent:e.onIntegratedQuery}})],1)},staticRenderFns:[]};var f=t("VU/8")(l,b,!1,function(e){t("poIy")},null,null);r.default=f.exports},poIy:function(e,r){}});