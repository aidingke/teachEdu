webpackJsonp([55],{e0n7:function(e,t){},sGgS:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("woOf"),s=r.n(a),o=r("Xxa5"),i=r.n(o),l=r("exGp"),u=r.n(l),n={name:"AddGroupMenbers",data:function(){return{ruleForm:{groupId:"",stuId:"",username:"",mobile:"",loginName:"",school:"",gender:"m",imgName:""},uploadImgSrc:"",editStatus:1,editStatusTxt:"保存",showEditBool:!0,postImgUrl:"/edu/teach/uploadImg",rules:{username:[{required:!0,message:"请输入姓名",trigger:"change"}],mobile:[{required:!0,message:"请输入手机号码",trigger:"change"},{validator:this.checkMobile,message:"手机号码格式不正确",trigger:"change"}],loginName:[{required:!0,message:"登录账号不能为空",trigger:"change"}],school:[{required:!0,message:"请填写学校",trigger:"change"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}]}}},computed:{headersSet:function(){return{accessToken:localStorage.getItem("accessToken")}}},watch:{"ruleForm.mobile":function(e){this.ruleForm.loginName=e}},methods:{goBack:function(){this.$route.query.groupId?this.$router.push({path:"./GroupMembers?groupId="+this.$route.query.groupId+"&matchStatus="+this.$route.query.matchStatus+"&matchId="+this.$route.query.matchId}):this.$router.back(-1)},getMatchStuInfo:function(){var e=this;return u()(i.a.mark(function t(){var r,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(r={}).stuId=e.$route.query.stuId,t.next=4,e.$axios.getMatchPersonInfo(r);case 4:1e3==(a=t.sent).code&&(e.ruleForm.username=a.data.userName,e.ruleForm.mobile=a.data.mobile,e.ruleForm.school=a.data.school,e.ruleForm.gender=a.data.gender,e.ruleForm.imgName=a.data.pic);case 6:case"end":return t.stop()}},t,e)}))()},checkMobile:function(e,t,r){/^1\d{10}$/.test(t)?r():r(new Error)},handleAvatarSuccess:function(e,t){this.uploadImgSrc=URL.createObjectURL(t.raw),1e3===e.code&&(this.ruleForm.imgName=e.data.imgName)},beforeAvatarUpload:function(e){var t=e.size/1024/1024<2;return t||this.$message.error("上传头像图片大小不能超过 2MB!"),t},addMatchPerson:function(e){var t=this;if(2==this.editStatus)return this.editStatusTxt="保存编辑",this.editStatus=1,!1;this.$refs[e].validate(function(e){if(e){var r=s()({},t.ruleForm);t.$axios.editMatchStu(r).then(function(e){console.log(e),1e3==e.code?(t.editStatus=2,t.editStatusTxt="编辑",t.ruleForm.stuId=e.data.stuId,t.successMsg("添加成功",function(){t.$router.push({path:"./GroupMembers?groupId="+t.$route.query.groupId+"&matchStatus="+t.$route.query.matchStatus+"&matchId="+t.$route.query.matchId})})):t.dialog(e.message)})}})}},mounted:function(){this.$route.query.stuId?(this.showEditBool=!1,this.editStatus=2,this.getMatchStuInfo()):(this.showEditBool=!0,this.editStatus=1,this.ruleForm.groupId=this.$route.query.groupId)}},m={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"addGroupMenbers"},[r("Header",{attrs:{title:"个人资料"},on:{goBack:e.goBack}}),r("div",{staticClass:"container"},[e._m(0),1==e.editStatus?r("el-form",{ref:"formName",staticClass:"formBox",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"130px"}},[r("el-form-item",{attrs:{label:"姓名",prop:"username"}},[r("el-input",{model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"手机号码",prop:"mobile"}},[r("el-input",{attrs:{maxlength:"11"},model:{value:e.ruleForm.mobile,callback:function(t){e.$set(e.ruleForm,"mobile",t)},expression:"ruleForm.mobile"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"登录账号",prop:"loginName"}},[r("el-input",{attrs:{disabled:!0,maxlength:"11"},model:{value:e.ruleForm.loginName,callback:function(t){e.$set(e.ruleForm,"loginName",t)},expression:"ruleForm.loginName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码"}},[r("p",{staticClass:"passTip"},[e._v("手机号码后6位")])]),e._v(" "),r("el-form-item",{attrs:{label:"学校",prop:"school"}},[r("el-input",{model:{value:e.ruleForm.school,callback:function(t){e.$set(e.ruleForm,"school",t)},expression:"ruleForm.school"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"性别",prop:"gender"}},[r("el-radio-group",{model:{value:e.ruleForm.gender,callback:function(t){e.$set(e.ruleForm,"gender",t)},expression:"ruleForm.gender"}},[r("el-radio",{attrs:{label:"m"}},[e._v("男")]),e._v(" "),r("el-radio",{attrs:{label:"f"}},[e._v("女")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"照片"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{headers:e.headersSet,action:e.postImgUrl,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,name:"imgFile",data:{imgType:1},accept:"image/jpg,image/jpeg,image/png"}},[e.uploadImgSrc?r("img",{staticClass:"avatar",attrs:{src:e.uploadImgSrc}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleForm.imgName,expression:"ruleForm.imgName"}],attrs:{type:"hidden",value:""},domProps:{value:e.ruleForm.imgName},on:{input:function(t){t.target.composing||e.$set(e.ruleForm,"imgName",t.target.value)}}}),r("span",{staticClass:"addTip"},[e._v("请上传一张清晰的个人照片 "),r("br"),e._v("大小不超过2M")])],1)],1):e._e(),2==e.editStatus?r("ul",[r("li",[r("span",{staticClass:"attribute"},[e._v("姓名")]),r("span",{staticClass:"content"},[e._v(e._s(e.ruleForm.username))])]),r("li",[r("span",{staticClass:"attribute"},[e._v("手机号码")]),r("span",{staticClass:"content"},[e._v(e._s(e.ruleForm.mobile))])]),r("li",[r("span",{staticClass:"attribute"},[e._v("学校")]),r("span",{staticClass:"content"},[e._v(e._s(e.ruleForm.school))])]),r("li",[r("span",{staticClass:"attribute"},[e._v("性别")]),r("span",{staticClass:"content"},[e._v(e._s("f"==e.ruleForm.gender?"女":"男"))])]),e.ruleForm.imgName?r("li",[r("span",{staticClass:"attribute"},[e._v("照片")]),r("span",{staticClass:"content"},[r("a",[r("img",{attrs:{src:"http://192.168.1.200/eduFiles/"+e.ruleForm.imgName}})])])]):e._e()]):e._e(),e.showEditBool?r("div",{staticClass:"fixed-footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addMatchPerson("formName")}}},[e._v(e._s(e.editStatusTxt))])],1):e._e()],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("nav",[t("span",{staticClass:"left"},[this._v("基本信息")])])}]};var c=r("VU/8")(n,m,!1,function(e){r("e0n7")},null,null);t.default=c.exports}});