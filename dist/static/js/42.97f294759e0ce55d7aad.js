webpackJsonp([42],{"5PK/":function(t,a){},P7EW:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=e("Xxa5"),s=e.n(r),o=e("exGp"),i=e.n(o),n={name:"SpeakingScore",data:function(){return{groupMembersInfo:{groupName:"",stuName:""},postData:{matchId:"",groupId:"",stuId:"",totalScore:"",partList:[{partScore:"",error:!1,errorText:"",disabled:!1}]},handleStatus:!1}},computed:{sumScore:function(){var t=0;return this.postData.partList.map(function(a,e){t+=Number(a.partScore)}),isNaN(t)?0:t}},watch:{sumScore:function(t){this.postData.totalScore=t}},methods:{goBack:function(){this.$router.back(-1)},onAddOperResult:function(){var t=this;return i()(s.a.mark(function a(){var e,r;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t.postData.partList.map(function(t,a){return""==t.partScore&&(t.error=!0,t.errorText="请输入分数"),t}),!t.postData.partList.every(function(t,a){return!t.error})){a.next=13;break}return(e={}).groupId=t.postData.groupId,e.stuId=t.postData.stuId,e.totalScore=t.postData.totalScore,e.partList=[],t.postData.partList.map(function(t,a){var r={};r.partName="第"+(a+1)+"部分",r.partScore=t.partScore,r.partSort=(a+1).toString(),e.partList.push(r)}),a.next=11,t.$axios.addOperResult(e);case 11:1e3==(r=a.sent).code?t.successMsg("评分成功",function(){t.$router.push({path:"./AssessmentGame?groupId="+t.$route.query.groupId})}):t.dialog(r.message);case 13:case"end":return a.stop()}},a,t)}))()},onAddPart:function(){this.postData.partList.push({partScore:"",error:!1,errorText:"",disabled:!1})},delPartList:function(t){this.postData.partList=this.postData.partList.filter(function(a,e){return t!=e})},ruleNum:function(t){""==t.partScore?(t.error=!0,t.errorText="请输入分数!"):/[^\d.]/g.test(t.partScore)&&(t.error=!0,t.errorText="请输入正确的分数!")},getPracticalDetail:function(){var t=this;return i()(s.a.mark(function a(){var e,r;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return(e={}).matchId=t.postData.matchId,e.studentId=t.postData.stuId,a.next=5,t.$axios.getPracticalDetail(e);case 5:1e3==(r=a.sent).code?(t.groupMembersInfo.groupName=r.data.groupName,t.groupMembersInfo.stuName=r.data.userName,t.convertData(r.data.partList)):t.dialog(r.message);case 7:case"end":return a.stop()}},a,t)}))()},convertData:function(t){var a=this;t.map(function(t,e){var r={partScore:t.partScore,error:!1,errorText:"",disabled:!0};0==e?(a.postData.partList[e].partScore=t.partScore,a.postData.partList[e].disabled=!0):a.postData.partList.push(r)})}},mounted:function(){if(this.postData.matchId=this.$route.query.matchId,this.postData.groupId=this.$route.query.groupId,this.postData.stuId=this.$route.query.stuId,this.handleStatus=this.$route.query.satues,1==this.handleStatus){var t=sessionStorage.getItem("groupMembersInfo");t&&(this.groupMembersInfo=JSON.parse(t))}else this.getPracticalDetail()}},u={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"speakingScore"},[e("Header",{attrs:{title:"实操评分"},on:{goBack:t.goBack}}),e("div",{staticClass:"hd-div"},[e("div",{staticClass:"group-name"},[t._v(t._s(t.groupMembersInfo.groupName))]),e("div",{staticClass:"student-name"},[t._v(t._s(t.groupMembersInfo.stuName))])]),e("div",{staticClass:"bd-div"},[e("div",{staticClass:"conts"},[e("ul",{staticClass:"list"},[e("li",[e("div",{staticClass:"score-title"},[t._v("总分")]),e("el-input",{attrs:{disabled:1!=t.handleStatus,placeholder:"0"},model:{value:t.postData.totalScore,callback:function(a){t.$set(t.postData,"totalScore",a)},expression:"postData.totalScore"}}),e("div",{staticClass:"score-unit"},[t._v("分")])],1),t._l(t.postData.partList,function(a,r){return e("li",{key:r},[e("div",{staticClass:"score-title"},[t._v("第"+t._s(r+1)+"部分")]),e("el-input",{attrs:{disabled:a.disabled,placeholder:"0",maxlength:"4"},on:{blur:function(e){t.ruleNum(a)},focus:function(t){a.error="",a.errorText=""}},model:{value:a.partScore,callback:function(e){t.$set(a,"partScore",e)},expression:"item.partScore"}}),e("div",{staticClass:"score-unit"},[t._v("分")]),r>0&&1==t.handleStatus?e("div",{staticClass:"del-btn",on:{click:function(a){t.delPartList(r)}}},[e("i",{staticClass:"el-icon-delete"})]):t._e(),a.error?e("div",{staticClass:"err"},[t._v(t._s(a.errorText))]):t._e()],1)})],2),1==t.handleStatus?e("div",{staticClass:"add-btn",on:{click:t.onAddPart}},[e("span",{staticClass:"el-icon-plus avatar-uploader-icon"})]):t._e()])]),1==t.handleStatus?e("FixedButton",{attrs:{buttonText:"确定"},on:{listenToChildEvent:t.onAddOperResult}}):t._e()],1)},staticRenderFns:[]};var c=e("VU/8")(n,u,!1,function(t){e("5PK/")},null,null);a.default=c.exports}});