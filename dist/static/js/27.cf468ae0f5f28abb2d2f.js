webpackJsonp([27],{LRip:function(t,s){},Taq1:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("mvHQ"),r=e.n(a),i=e("Xxa5"),o=e.n(i),n=e("exGp"),c=e.n(n),u={name:"AssessmentGame",data:function(){return{tabValue:1,roles:"",postData:{groupId:"",theoryFlag:sessionStorage.getItem("AssessmentGameTheoryFlag")||0,pageNo:1,pageSize:10},showTable:!0,isMatchType:!0,renderList:[],matchId:""}},methods:{goBack:function(){this.$router.push({path:"./MatchManage"}),sessionStorage.setItem("AssessmentGameTheoryFlag",""),sessionStorage.removeItem("matchId"),sessionStorage.removeItem("theoryFlag")},getMatchResultList:function(){var t=this;return c()(o.a.mark(function s(){var e;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.$axios.getMatchResultList(t.postData);case 2:1e3==(e=s.sent).code&&(t.renderList=e.data||[]);case 4:case"end":return s.stop()}},s,t)}))()},getStuMatchTestList:function(){var t=this;return c()(o.a.mark(function s(){var e,a;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return(e={}).matchId=sessionStorage.getItem("matchId"),s.next=4,t.$axios.getStuMatchTestList(e);case 4:1e3==(a=s.sent).code&&(t.renderList=a.data||[]);case 6:case"end":return s.stop()}},s,t)}))()},tabChange:function(t){this.postData.theoryFlag=t,sessionStorage.setItem("AssessmentGameTheoryFlag",t),1!=this.postData.pageNo&&(this.postData.pageNo=1),this.getMatchResultList()},onTeachleLink:function(t){if(1==this.postData.theoryFlag)t.stuScore&&0!=t.stuScore&&t.stuScore,this.$router.push({path:"./AnsderDetail?questType=4&qbId="+t.qbId+"&stuId="+t.stuId});else{if(!this.hasQx("comm:match:practicalDetail"))return this.dialog("您无权进行该操作"),!1;var s=1;if(t.stuScore&&0!=t.stuScore&&"0.00"!=t.stuScore)s=2,sessionStorage.setItem("groupMembersInfo","");else{var e={};e.groupName=t.groupName,e.stuName=t.stuName,sessionStorage.setItem("groupMembersInfo",r()(e))}this.$router.push({path:"./SpeakingScore?matchId="+sessionStorage.getItem("matchId")+"&groupId="+this.postData.groupId+"&stuId="+t.stuId+"&satues="+s})}},onStuLink:function(t){if(1==t.type)if(t.score&&"0.00"!=t.score)this.$router.push({path:"./AnsderDetail?questType=4&qbId="+t.id});else{if(!this.isMatchType)return!1;if(0==t.isStart)return this.dialog("比赛还没开始"),!1;if(Date.parse(t.endTime)<Date.now())return this.dialog("比赛已经结束，无法进去答题"),!1;if(1==t.stuStatus)return this.dialog("您已经提交过试卷"),!1;this.$router.push({path:"./TestPaper?questType=4&qbId="+t.id})}else t.score&&"0.00"!=t.score&&this.$router.push({path:"./SpeakingScore?matchId="+sessionStorage.getItem("matchId")+"&matchType="+this.$route.query.matchType+"&satues=2"})}},mounted:function(){var t=this;this.$route.query.matchId&&sessionStorage.setItem("matchId",this.$route.query.matchId),this.$route.query.theoryFlag&&sessionStorage.setItem("theoryFlag",this.$route.query.theoryFlag),this.hasQx("teach:match:resultList")?(this.roles=1,this.postData.groupId=this.$route.query.groupId,this.getMatchResultList(),1==sessionStorage.getItem("theoryFlag")?this.showTable=!0:this.showTable=!1):this.hasQx("stu:match:testList")?(this.roles=2,this.getStuMatchTestList(),this.$route.query.matchType?this.isMatchType=!1:this.isMatchType=!0):this.dialog("您无权进行该操作",function(){t.$router.push({path:"Home"})})}},h={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"assessmentGame"},[e("Header",{attrs:{title:"比赛考核"},on:{goBack:t.goBack}}),1===t.roles?e("div",{staticClass:"teacher"},[t.showTable?e("el-row",{staticClass:"tab-cont"},[e("el-col",{attrs:{span:12}},[e("div",{staticClass:"tab",class:0==t.postData.theoryFlag?"on":"",on:{click:function(s){t.tabChange(0)}}},[t._v("实操")])]),t._v(" "),e("el-col",{attrs:{span:12}},[e("div",{staticClass:"tab",class:1==t.postData.theoryFlag?"on":"",on:{click:function(s){t.tabChange(1)}}},[t._v("理论")])])],1):t._e(),t.renderList.length>0?e("ul",{staticClass:"match-list"},t._l(t.renderList,function(s,a){return e("li",{key:s.stuId,staticClass:"item",on:{click:function(e){t.onTeachleLink(s)}}},[e("div",{staticClass:"match-name"},[e("span",[t._v(t._s(s.stuName))]),e("span",{staticClass:"time"},[t._v(t._s(s.groupName))])]),0==s.examStatus&&"0"==s.stuScore?e("div",{staticClass:"check-group"},[e("el-button",{attrs:{plain:"",round:""}},[t._v("尚未开始")])],1):e("div",{staticClass:"check-group"},[s.stuScore&&0!=s.stuScore?e("div",{staticClass:"stuScore"},[e("strong",[t._v(t._s(s.stuScore))]),e("em",[t._v("分")])]):0==t.postData.theoryFlag&&t.hasQx("teach:match:addOperResult")?e("el-button",{attrs:{plain:"",round:""}},[t._v("评分")]):e("el-button",{attrs:{plain:"",round:""}},[t._v("批卷")])],1)])})):t._e()],1):e("div",{staticClass:"student"},[t.renderList.length>0?e("ul",{staticClass:"match-list"},t._l(t.renderList,function(s,a){return e("li",{key:a,staticClass:"item",on:{click:function(e){t.onStuLink(s)}}},[e("div",{staticClass:"match-name"},[e("span",[t._v(t._s(s.title))]),e("span",{staticClass:"time"},[t._v(t._s(s.startTime)+" - "+t._s(s.endTime))]),e("span",{staticClass:"matchDesc"},[t._v(t._s(s.matchDesc))])]),s.score&&"0.00"!=s.score&&"0"!=s.score?e("div",{staticClass:"check-group"},[e("div",{staticClass:"stuScore"},[e("strong",[t._v(t._s(s.score))]),e("em",[t._v("分")])])]):1==s.isStart&&t.isMatchType&&1!=s.stuStatus&&1==s.type?e("div",{staticClass:"check-group"},[e("el-button",{attrs:{plain:"",round:""}},[t._v("开始考试")])],1):t._e(),e("div",{staticClass:"type"},[e("span",[t._v(t._s(1==s.type?"理论":"实操"))])])])})):t._e()]),0===t.renderList.length?e("NotInfo",{attrs:{notClass:"暂无相关数据",defaultImg:"static/img/not-data-default.png"}}):t._e()],1)},staticRenderFns:[]};var l=e("VU/8")(u,h,!1,function(t){e("LRip")},null,null);s.default=l.exports}});