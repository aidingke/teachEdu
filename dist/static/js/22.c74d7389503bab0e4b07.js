webpackJsonp([22],{ZzOp:function(e,t){},ddZf:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("gRE1"),s=a.n(i),n=a("Xxa5"),r=a.n(n),c=a("exGp"),o=a.n(c),l=a("0Mti"),d={name:"TeaEditor",data:function(){return{imageUrl:"",fileImgUrl:"",postImgUrl:"/edu/teach/uploadImg",userType:"",teacherInfo:{},accessToken:"",validate:{mobile:{isOK:!0,text:"请填写手机号"},qq:{isOK:!0,text:"填写QQ号有误"}},img_api:l.a.img_api}},methods:{goBack:function(){this.$router.push({path:"PerCenter"})},getPersonInfo:function(){var e=this;return o()(r.a.mark(function t(){var a,i;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={type:0},t.next=3,e.$axios.personInfo(a);case 3:1e3===(i=t.sent).code&&(e.teacherInfo=i.data,e.fileImgUrl=e.img_api+e.teacherInfo.pic);case 5:case"end":return t.stop()}},t,e)}))()},edit:function(){this.$router.push({path:"/TeacherDeditor"})},handleAvatarSuccess:function(e,t){1e3==e.code&&(console.log(e,"res"),this.fileImgUrl=URL.createObjectURL(t.raw),this.teacherInfo.pic=e.data.imgName)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/jpg"===e.type||"image/gif"===e.type,a=e.size/1024/1024<2;return t||this.dialog("请上传正确的图片格式!"),a||this.dialog("上传头像图片大小不能超过 2MB!"),t&&a},check:function(){var e=this.teacherInfo;e.mobile?/^1\d{10}$/.test(e.mobile)?this.validate.mobile.isOK=!0:(this.validate.mobile.isOK=!1,this.validate.mobile.text="填写手机号码有误"):(this.validate.mobile.isOK=!1,this.validate.mobile.text="请填写手机号码"),e.qq?/^[1-9][0-9]{4,10}$/.test(e.qq)?this.validate.qq.isOK=!0:this.validate.qq.isOK=!1:this.validate.qq.isOK=!0},save:function(){var e=this;return o()(r.a.mark(function t(){var a,i;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.check(),!s()(e.validate).every(function(e){return e.isOK})){t.next=13;break}return(a={}).mobile=e.teacherInfo.mobile,a.pic=e.teacherInfo.pic,a.wx=e.teacherInfo.wx,a.qq=e.teacherInfo.qq,a.politics=e.teacherInfo.politics,a.addr=e.teacherInfo.addr,t.next=11,e.$axios.personMod(a);case 11:1e3==(i=t.sent).code?(e.successMsg("操作成功"),e.$router.push({path:"/PerCenter"})):e.dialog(i.message);case 13:case"end":return t.stop()}},t,e)}))()}},created:function(){this.userType=localStorage.getItem("userType")},mounted:function(){this.getPersonInfo(),this.accessToken=localStorage.getItem("accessToken")}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tea-editor"},[a("Header",{attrs:{title:"个人资料"},on:{goBack:e.goBack}}),a("div",{staticClass:"container"},[e._m(0),a("ul",[a("li",[e._m(1),a("div",{staticClass:"content"},[a("el-input",{attrs:{disabled:!0},model:{value:e.teacherInfo.userName,callback:function(t){e.$set(e.teacherInfo,"userName",t)},expression:"teacherInfo.userName"}})],1)]),a("li",[e._m(2),a("div",{staticClass:"content"},[a("el-input",{attrs:{placeholder:"手机号码",maxlength:"11"},on:{input:e.check},model:{value:e.teacherInfo.mobile,callback:function(t){e.$set(e.teacherInfo,"mobile",t)},expression:"teacherInfo.mobile"}}),e.validate.mobile.isOK?e._e():a("span",{staticClass:"validate"},[e._v(e._s(e.validate.mobile.text))])],1)]),a("li",[e._m(3),a("div",{staticClass:"content"},[a("el-input",{attrs:{disabled:!0},model:{value:e.teacherInfo.job,callback:function(t){e.$set(e.teacherInfo,"job",t)},expression:"teacherInfo.job"}})],1)]),a("li",[e._m(4),a("div",{staticClass:"content"},[e.teacherInfo.gender?a("el-radio",{attrs:{label:"m"},model:{value:e.teacherInfo.gender,callback:function(t){e.$set(e.teacherInfo,"gender",t)},expression:"teacherInfo.gender"}},[e._v("男")]):e._e(),e._v(" "),e.teacherInfo.gender?a("el-radio",{attrs:{label:"f"},model:{value:e.teacherInfo.gender,callback:function(t){e.$set(e.teacherInfo,"gender",t)},expression:"teacherInfo.gender"}},[e._v("女")]):e._e()],1)]),a("li",[e._m(5),a("div",{staticClass:"content"},[a("el-input",{attrs:{disabled:!0},model:{value:e.teacherInfo.email,callback:function(t){e.$set(e.teacherInfo,"email",t)},expression:"teacherInfo.email"}})],1)]),a("li",[a("div",{staticClass:"attribute"},[e._v("入职时间")]),a("div",{staticClass:"content"},[a("el-date-picker",{attrs:{placeholder:"选择日期",type:"date",format:"yyyy-MM-dd"},model:{value:e.teacherInfo.learnTime,callback:function(t){e.$set(e.teacherInfo,"learnTime",t)},expression:"teacherInfo.learnTime"}})],1)]),a("li",[a("div",{staticClass:"attribute"},[e._v("出生年月")]),a("div",{staticClass:"content"},[a("el-date-picker",{attrs:{placeholder:"选择日期",type:"date",format:"yyyy-MM-dd"},model:{value:e.teacherInfo.birthday,callback:function(t){e.$set(e.teacherInfo,"birthday",t)},expression:"teacherInfo.birthday"}})],1)]),a("li",[a("div",{staticClass:"attribute"},[e._v("照片")]),a("div",{staticClass:"content",style:{width:"110px",height:"110px"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{name:"imgFile",headers:{accessToken:this.accessToken},action:e.postImgUrl,"show-file-list":!1,"on-success":e.handleAvatarSuccess,data:{imgType:0},"before-upload":e.beforeAvatarUpload}},[e.teacherInfo.pic?a("img",{staticClass:"avatar",attrs:{src:e.fileImgUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.teacherInfo.pic,expression:"teacherInfo.pic"}],attrs:{type:"hidden",value:""},domProps:{value:e.teacherInfo.pic},on:{input:function(t){t.target.composing||e.$set(e.teacherInfo,"pic",t.target.value)}}}),e.fileImgUrl?e._e():a("span",{staticClass:"addTip"},[e._v("请上传一张清晰的个人照片 "),a("br"),e._v("大小不超过2M")])],1)]),a("li",[a("div",{staticClass:"attribute"},[e._v("微信号")]),a("div",{staticClass:"content"},[a("el-input",{model:{value:e.teacherInfo.wx,callback:function(t){e.$set(e.teacherInfo,"wx",t)},expression:"teacherInfo.wx"}})],1)]),a("li",[a("div",{staticClass:"attribute"},[e._v("QQ")]),a("div",{staticClass:"content"},[a("el-input",{on:{input:e.check},model:{value:e.teacherInfo.qq,callback:function(t){e.$set(e.teacherInfo,"qq",t)},expression:"teacherInfo.qq"}}),e.validate.qq.isOK?e._e():a("span",{staticClass:"validate"},[e._v(e._s(e.validate.qq.text))])],1)])]),a("FixedButton",{attrs:{buttonText:"保存"},on:{listenToChildEvent:e.save}})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("nav",[t("span",{staticClass:"left"},[this._v("基本信息")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"attribute"},[this._v("姓名"),t("i",[this._v("*")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"attribute"},[this._v("手机号码"),t("i",[this._v("*")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"attribute"},[this._v("职务"),t("i",[this._v("*")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"attribute"},[this._v("性别"),t("i",[this._v("*")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"attribute"},[this._v("邮箱"),t("i",[this._v("*")])])}]};var u=a("VU/8")(d,h,!1,function(e){a("ZzOp")},null,null);t.default=u.exports}});