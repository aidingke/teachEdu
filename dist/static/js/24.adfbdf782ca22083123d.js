webpackJsonp([24],{Psmm:function(t,e){},yRMt:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Xxa5"),i=s.n(a),c=s("exGp"),n=s.n(c),r={name:"TestData",data:function(){return{diagnosticDetails:{itemList:[],maintainceList:[],partsList:[],result:"",score:"",status:"",summary:"",comment:"",teachDetail:""},params:{digId:"",stuId:"",score:"",teachComment:""},commentShow:"",scoreShow:!1,userType:localStorage.getItem("userType"),showComment:!0}},methods:{goBack:function(){this.$router.back(-1)},TeachDigAddComment:function(){var t=this;return n()(i.a.mark(function e(){var s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.TeachDigAddComment(t.params);case 2:if(s=e.sent,""!==t.params.teachComment){e.next=6;break}return t.dialog("老师评语不能为空"),e.abrupt("return");case 6:1e3===s.code?(t.successMsg("老师评语新增成功"),t.diagnosticDetails.comment=t.params.teachComment,t.commentShow=!0):t.dialog(s.message);case 7:case"end":return e.stop()}},e,t)}))()},TeachDigAddScore:function(){var t=this;return n()(i.a.mark(function e(){var s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.TeachDigAddScore(t.params);case 2:if(s=e.sent,""!==t.params.score){e.next=6;break}return t.dialog("综合评分不能为空"),e.abrupt("return");case 6:1e3===s.code?(t.successMsg("综合评分新增成功"),t.diagnosticDetails.score=t.params.score,t.scoreShow=!0):t.dialog(s.message);case 7:case"end":return e.stop()}},e,t)}))()},DitDetail:function(t){var e=this;return n()(i.a.mark(function t(){var s,a,c,n,r,o,m,l,d,u;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((s={digId:e.params.digId,stuId:e.params.stuId}).digId){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.$axios.DitDetail(s);case 5:if(1e3!==(a=t.sent).code||!a.data){t.next=35;break}c={},e.diagnosticDetails=a.data,n=[],r=e.diagnosticDetails.itemList,o=0,m=r.length;case 12:if(!(o<m)){t.next=31;break}if(l=r[o],c[l.sysName]){t.next=19;break}n.push({sysName:l.sysName,data:[l]}),c[l.sysName]=l,t.next=28;break;case 19:d=0;case 20:if(!(d<n.length)){t.next=28;break}if((u=n[d]).sysName!=l.sysName){t.next=25;break}return u.data.push(l),t.abrupt("break",28);case 25:d++,t.next=20;break;case 28:o++,t.next=12;break;case 31:e.diagnosticDetails.itemList=n,"0"===e.userType?(e.hasQx("teach:diagnose:addComment")?""!=e.diagnosticDetails.comment&&null!=e.diagnosticDetails.comment?e.commentShow=!0:e.commentShow=!1:e.showComment=!1,e.hasQx("teach:diagnose:addScore")?""!=e.diagnosticDetails.score&&null!=e.diagnosticDetails.score?e.scoreShow=!0:e.scoreShow=!1:e.scoreShow=!0):"1"===e.userType&&(""!=e.diagnosticDetails.score&&null!=e.diagnosticDetails.score?e.scoreShow=!0:e.scoreShow=!1,""!=e.diagnosticDetails.comment&&null!=e.diagnosticDetails.comment?e.commentShow=!0:e.commentShow=!1),t.next=40;break;case 35:if(1100!==a.code){t.next=39;break}return t.abrupt("return");case 39:e.dialog(a.message);case 40:case"end":return t.stop()}},t,e)}))()}},mounted:function(){this.$route.query.teachDetail&&(this.teachDetail=this.$route.query.teachDetail),this.$route.query.stuId&&(this.params.stuId=this.$route.query.stuId),this.$route.query.digId&&(this.params.digId=this.$route.query.digId),this.DitDetail()}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"test"},[s("Header",{attrs:{title:"检测数据"},on:{goBack:t.goBack}}),t._l(t.diagnosticDetails.itemList,function(e,a){return s("div",{key:"items.sysName_"+a,staticClass:"module"},[s("div",{staticClass:"title"},[t._v(" "+t._s(e.sysName))]),s("hr"),t._l(e.data,function(e,a){return s("div",{key:"item.itemName"+a,staticClass:"items-row"},[s("div",{staticClass:"flex-auto"},[t._v(t._s(e.itemName))]),s("div",{staticClass:"flex-1"},[t._v(t._s(e.itemValue))])])})],2)}),s("div",{staticClass:"module"},[s("div",{staticClass:"title"},[t._v("诊断结果")]),s("hr"),s("div",{staticClass:"items-column"},[s("div",{staticClass:"results"},[t._v(t._s(t.diagnosticDetails.result))])])]),s("div",{staticClass:"module"},[s("div",{staticClass:"title"},[t._v("维修方式")]),s("hr"),s("div",{staticClass:"card"},[t._m(0),t._l(t.diagnosticDetails.maintainceList,function(e,a){return t.diagnosticDetails.maintainceList.length>0?s("div",{key:"maintainceList_"+a,staticClass:"items-column"},[t._v(t._s(e.fixItem))]):s("div",{staticClass:"items-column"},[t._v("无维修方式")])}),t._m(1),t._m(2),t._l(t.diagnosticDetails.partsList,function(e,a){return s("div",{key:"partsList_"+a,staticClass:"nav-text"},[s("div",{staticClass:"name"},[t._v(t._s(e.partName))]),s("div",{staticClass:"number"},[t._v(t._s(e.partNum))]),s("div",{staticClass:"company"},[t._v(t._s(e.partUnit))])])})],2)]),s("div",{staticClass:"module"},[s("div",{staticClass:"title"},[t._v("诊断思路与总结")]),s("hr"),s("div",{staticClass:"items-column"},[s("div",{staticClass:"summary"},[t._v(t._s(t.diagnosticDetails.summary))])])]),t.showComment?s("div",{staticClass:"module"},[s("div",{staticClass:"title",staticStyle:{display:"flex","justify-content":"space-between"}},[s("span",[t._v("老师评语")]),"0"===t.userType?[t.commentShow?t._e():s("span",{staticStyle:{color:"#148CE8"},on:{click:t.TeachDigAddComment}},[t._v("完成 ")])]:t._e()],2),s("hr"),s("div",{staticClass:"items-column"},[t.commentShow?s("div",{staticClass:"comments"},[t._v(t._s(t.diagnosticDetails.comment))]):t._e(),"1"===t.userType?[t.commentShow?t._e():s("div",{staticClass:"comments"},[t._v("暂无老师评语")])]:t._e(),"0"===t.userType?[t.commentShow?t._e():s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.params.teachComment,expression:"params.teachComment"}],staticStyle:{width:"100%",height:"150px","border-radius":"5px","box-sizing":"border-box"},domProps:{value:t.params.teachComment},on:{input:function(e){e.target.composing||t.$set(t.params,"teachComment",e.target.value)}}})]:t._e()],2)]):t._e(),t.scoreShow?t._e():s("div",{staticClass:"module"},[s("div",{staticClass:"title",staticStyle:{display:"flex","justify-content":"space-between"}},["0"===t.userType?[s("span",[t._v("综合评分")]),t.scoreShow?t._e():s("span",{staticStyle:{color:"#148CE8"},on:{click:t.TeachDigAddScore}},[t._v("完成 ")])]:t._e()],2),s("hr"),s("div",{staticClass:"items-column",staticStyle:{"margin-top":"0","padding-bottom":"0.4rem"}},["0"===t.userType?[t.scoreShow?t._e():s("el-input",{staticStyle:{width:"100%","border-radius":"5px","box-sizing":"border-box"},model:{value:t.params.score,callback:function(e){t.$set(t.params,"score",e)},expression:"params.score"}},[s("template",{slot:"append"},[t._v("分")])],2)]:t._e()],2)]),s("div",{staticClass:"grade"},[s("span",[t._v(t._s(t.diagnosticDetails.score))])])],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"nav"},[e("div",{staticClass:"title-left"},[this._v("维修方式")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"nav"},[e("div",{staticClass:"title-left"},[this._v("配件耗材")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"nav-text"},[e("div",{staticClass:"name"},[this._v("名称")]),e("div",{staticClass:"number"},[this._v("数量")]),e("div",{staticClass:"company"},[this._v("单位")])])}]};var m=s("VU/8")(r,o,!1,function(t){s("Psmm")},null,null);e.default=m.exports}});