webpackJsonp([62],{DhAg:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("gRE1"),n=s.n(i),a=s("Xxa5"),c=s.n(a),o=s("exGp"),r=s.n(o),l={name:"SubjectManage",data:function(){return{title:"",subInput:"",icon:"",dialogTableVisible:!1,subjectList:[],studentIndex:"",confirmText:"",showConfirm:!1,buttonText:"",id:"",validate:{name:{isOK:!0,text:"科目名不能为空"},color:{isOK:!0,text:"请选择科目标识"}}}},methods:{goBack:function(){this.$router.push({path:"Home"})},getSubject:function(){var t=this;return r()(c.a.mark(function e(){var s,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s={pageNo:1,pageSize:100},e.next=3,t.$axios.getSubjectList(s);case 3:1e3===(i=e.sent).code&&(t.subjectList=i.data,console.log(i));case 5:case"end":return e.stop()}},e,t)}))()},add:function(){var t=this;return r()(c.a.mark(function e(){var s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.subInput?t.validate.name.isOK=!0:t.validate.name.isOK=!1,t.icon?t.validate.color.isOK=!0:t.validate.color.isOK=!1,!n()(t.validate).every(function(t){return t.isOK})){e.next=8;break}return s={subjectName:t.subInput,icon:t.icon},e.next=6,t.$axios.getSubjectEdit(s);case 6:1e3===e.sent.code?(t.successMsg("操作成功"),t.dialogTableVisible=!1,t.getSubject()):t.dialog("操作失败");case 8:case"end":return e.stop()}},e,t)}))()},handleDialog:function(t){t?(this.title="编辑科目",this.subInput=t.subjectName,this.studentIndex=t.id,this.buttonText="保存"):(this.title="添加科目",this.buttonText="新增",this.subInput=""),this.dialogTableVisible=!0},closeConfirm:function(){this.showConfirm=!1},deleCurrentLine:function(t){this.showConfirm=!0,this.confirmText="确定删除该科目吗？",this.id=t},determine:function(){var t=this;return r()(c.a.mark(function e(){var s,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s={subjectId:t.id},e.next=3,t.$axios.getSubjectDele(s);case 3:1e3===(i=e.sent).code?(t.successMsg("操作成功"),t.showConfirm=!1,t.getSubject()):(t.dialog(i.message),t.showConfirm=!1);case 5:case"end":return e.stop()}},e,t)}))()},select:function(t,e){this.icon=t,this.studentIndex=e}},mounted:function(){this.getSubject()}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"subject"},[s("Header",{attrs:{title:"科目管理"},on:{goBack:t.goBack}}),s("div",{staticClass:"container"},[s("nav",[s("span",{staticClass:"left"},[t._v("全部科目（"+t._s(t.subjectList.length)+"）")])]),s("ul",t._l(t.subjectList,function(e,i){return s("li",{key:i},[s("span",{staticClass:"name"},[t._v(t._s(e.subjectName))]),s("span",{staticClass:"color",style:"background-color: "+e.icon}),Number(e.id)>8?s("span",{staticClass:"control"},[t.hasQx("teach:subject:edit")?s("a",{attrs:{href:"javascript:void(0)"},on:{click:function(s){t.handleDialog(e,i)}}},[s("img",{attrs:{src:"static/img/edit.png"}})]):t._e(),t.hasQx("teach:subject:delete")?s("a",{attrs:{href:"javascript:void(0)"},on:{click:function(s){t.deleCurrentLine(e.id)}}},[s("img",{attrs:{src:"static/img/dele.png"}})]):t._e()]):t._e()])}))]),s("el-dialog",{attrs:{visible:t.dialogTableVisible,width:"445px"},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[s("div",{staticClass:"window"},[s("h3",[t._v(" "+t._s(t.title))]),s("div",{staticClass:"sub-name"},[t._v("科目名称"),s("span",[t._v("*")])]),s("el-input",{attrs:{placeholder:"输入科目名称"},model:{value:t.subInput,callback:function(e){t.subInput=e},expression:"subInput"}}),t.validate.name.isOK?t._e():s("span",{staticClass:"validate"},[t._v(t._s(t.validate.name.text))]),s("div",{staticClass:"sub-name"},[t._v("科目标识")]),s("div",{staticClass:"color-content"},t._l(t.subjectList,function(e,i){return s("div",{key:i,staticClass:"color",style:{border:t.studentIndex==e.id?"2px solid #b7b7b7":"none"},on:{click:function(s){t.select(e.icon,e.id)}}},[s("span",{staticClass:"dot",style:"background-color: "+e.icon})])})),t.validate.color.isOK?t._e():s("span",{staticClass:"validate"},[t._v(t._s(t.validate.color.text))]),s("div",{staticClass:"button-item"},[s("div",[s("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v(t._s(t.buttonText))]),s("el-button",{attrs:{plain:""},on:{click:function(e){t.dialogTableVisible=!1}}},[t._v("取消")])],1)])],1)]),t.hasQx("teach:subject:edit")?s("a",{staticClass:"add",attrs:{href:"javascript:void(0)"},on:{click:function(e){t.handleDialog()}}},[s("span",{staticClass:"push"},[t._v("+")]),s("span",{staticClass:"font"},[t._v("新增科目")])]):t._e(),s("ConfirmDialog",{attrs:{confirmTitile:"提示",confirmText:t.confirmText,dialogTableVisible:t.showConfirm,confirmTextButton:"删除",closeTextButton:"取消"},on:{determine:t.determine,closeConfirm:t.closeConfirm}})],1)},staticRenderFns:[]};var d=s("VU/8")(l,u,!1,function(t){s("LRtu")},null,null);e.default=d.exports},LRtu:function(t,e){}});