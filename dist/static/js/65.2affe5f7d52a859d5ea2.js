webpackJsonp([65],{"6A8w":function(t,e){},T2rE:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Xxa5"),r=s.n(a),c=s("exGp"),i=s.n(c),n=s("0Mti"),o={name:"AnsderDetail",data:function(){return{headTitle:"",edit:"",titile:"",qbDesc:"",startTime:"",endTime:"",score:"",totalNum:"",showAdd:!1,imgDialogVisible:!1,img_api:n.a.img_api,targetImg:"",pfTitle:"",tempTarget:"",tempScore:"",tempCont:"",scoreAll:"",examStatus:"",questType:"",statusM:"",form:{formScore:"",pContent:""},questId:"",qbId:"",examId:"",qcList:[],scoreA0:0,scoreA1:0,scoreA2:0,scoreA3:0,scoreA4:0,sinData:[],mulData:[],JudData:[],comData:[],DisData:[],every0:0,every1:0,every2:0,every3:0,every4:0,tempSc:"",allQuesNum:[],subjectName:"",stuExamId:""}},methods:{goBack:function(){this.$router.back(-1)},showImages:function(){this.targetImg=event.target.getAttribute("src"),this.imgDialogVisible=!0},currentIndex:function(t,e){if(t==e)return!1;if(t!=e){if(0==e)return!0;if(1==e)return!0}},editAnswersScore:function(t,e,s,a,r){this.questId=t,this.showAdd=!0,e.length>0&&(this.pfTitle=e),this.tempSc=r,this.form.formScore="",this.form.pContent="",this.tempTarget=event.target.parentNode},AddScore:function(){var t=this;return i()(r.a.mark(function e(){var s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s={stuId:t.$route.query.stuId,stuExamId:t.stuExamId},e.next=3,t.$axios.addExamworkComment(s);case 3:1e3===e.sent.code?(t.successMsg("改卷成功!"),t.$router.back(-1)):t.dialog("改卷没成功!再试一次或者联系管理员");case 5:case"end":return e.stop()}},e,t)}))()},AddInfo:function(){var t=this;return i()(r.a.mark(function e(){var s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""==t.form.formScore?t.dialog("分数必填!"):isNaN(t.form.formScore)&&t.dialog("请填数字!"),!(Number(t.form.formScore)>Number(t.tempSc))){e.next=4;break}return t.dialog("分数不能大于 每题规定的分数!"),e.abrupt("return",!1);case 4:return(s={questId:t.questId,teachScore:t.form.formScore,teachComment:t.form.pContent,stuExamId:t.$route.query.stuExamId}).stuExamId=t.stuExamId,e.next=8,t.$axios.addExamComment(s);case 8:1e3===e.sent.code&&(t.tempTarget.children[1].innerHTML=t.form.formScore+"分",t.tempTarget.parentNode.getElementsByClassName("editBtn")[0].innerHTML="修改评分",t.tempTarget.parentNode.getElementsByClassName("teachComment")[0].innerHTML="评语："+t.form.pContent,t.tempScore=t.form.formScore,t.tempCont=t.form.pContent,t.showAdd=!1,t.successMsg("改分成功!"),t.getList());case 10:case"end":return e.stop()}},e,t)}))()},getList:function(){var t=this;return i()(r.a.mark(function e(){var s,a,c,i,n,o,l,u,m,d,h,v,_,p,f,g,y,S,q,x,A;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.$route.query.stuId,a={qbId:t.qbId,examId:t.examId,stuId:s},c=[],i=[],n=[],o=[],l=[],u=[],e.next=4,t.$axios.getCommitExamInfo(a);case 4:m=e.sent,d=m.data.qcOptionList,h=m.data.qcStuList,(m.data.qcStuList.length<=0||m.data.qcList.length<=0)&&(t.dialog("暂无学生答题!"),t.$router.back(-1)),t.subjectName=m.data.subjectName,t.stuExamId=m.data.stuExamId,t.titile=m.data.title,t.qbDesc=m.data.qcDesc,t.startTime=m.data.startTime,t.endTime=m.data.endTime,t.score=m.data.score,t.totalNum=m.data.orderNum,t.examStatus=m.data.examStatus,t.qcList=m.data.qcList,t.qcList.forEach(function(t,e){var s={};s.qcId=t.qcId,s.qcDesc=t.qcDesc,s.orderNum=t.orderNum,s.type=t.type,s.qcPic=t.qcPic,s.qcAnswer=t.qcAnswer,s.qcScore=t.qcScore,s.arr=[],s.stuAnswer="",s.teachScore="",s.teachComment="",h.forEach(function(e,a){e.qcId==t.qcId&&(s.stuAnswer=e.stuAnswer,s.teachScore=e.teachScore,s.teachComment=e.teachComment)}),d.forEach(function(e,a){var r={};r.itemDesc=e.optionName,r.item=e.optionValue,r.qcId=e.qcId,e.qcId==t.qcId&&s.arr.push(r)}),c.push(s)}),c.forEach(function(t,e){0==t.type?i.push(t):1==t.type?n.push(t):2==t.type?o.push(t):3==t.type?l.push(t):4!=t.type||u.push(t)}),t.sinData=i,t.mulData=n,t.JudData=o,t.comData=l,t.DisData=u,v=0,_=0,p=0,f=0,g=0,y=[],[],S=[],q="",t.sinData.forEach(function(t,e){q=t.qcScore,t.qcAnswer=parseInt(t.qcAnswer),t.stuAnswer=parseInt(t.stuAnswer),t.qcAnswer===t.stuAnswer?v+=t.qcScore:t.qcScore=0}),t.every0=q,t.mulData.forEach(function(t,e){q=t.qcScore,y=t.qcAnswer.split("ψ"),S=t.stuAnswer.split("ψ"),t.arr.forEach(function(e,s){y[s].length>0&&("true"==y[s]?e.qcAnswer=!0:e.qcAnswer=!1),S[s].length>0&&("true"==S[s]?e.qcStAnswer=!0:e.qcStAnswer=!1),e.qcAnswer!=e.qcStAnswer&&(t.qcScore=0)}),_+=t.qcScore}),t.every1=q,t.JudData.forEach(function(t,e){q=t.qcScore,t.qcAnswer=parseInt(t.qcAnswer),t.stuAnswer=parseInt(t.stuAnswer),t.qcAnswer===t.stuAnswer?p+=t.qcScore:t.qcScore=0}),t.every2=q,t.comData.forEach(function(t,e){q=t.qcScore,t.teachScore&&(f+=Number(t.teachScore)),y=t.qcAnswer.split("ψ"),S=t.stuAnswer.split("ψ"),y.length>0&&y.forEach(function(e,s){if(e.length>0){var a={};S.length>0&&S.forEach(function(t,r){e.length>0&&s==r&&(a.stuAnswer=t)}),a.answersl=e,t.arr.push(a)}});var s=0;t.arr.forEach(function(t,e){""!=t.answersl&&void 0!=t.answersl||s++}),t.arr.splice(0,s)}),t.every3=q,x=[],t.DisData.forEach(function(t,e){if(q=t.qcScore,t.teachScore&&(g+=Number(t.teachScore)),t.qcPic){x=t.qcPic.split("ψ");for(var s=[],a=0;a<x.length;a++)x[a].length>0&&(s[a]=x[a]);t.imgArr=s}}),t.every4=q,t.scoreA0=v,t.scoreA1=_,t.scoreA2=p,t.scoreA3=f,t.scoreA4=g,t.scoreAll=v+_+p+f+g,1!=Number(t.examStatus)&&0!=Number(t.examStatus)||void 0!=document.getElementById("myScoresAll")&&(document.getElementById("myScoresAll").innerHTML=t.scoreAll),A=0,t.sinData.length>0&&(A++,t.allQuesNum[0]=A),t.mulData.length>0&&(A++,t.allQuesNum[1]=A),t.JudData.length>0&&(A++,t.allQuesNum[2]=A),t.comData.length>0&&(A++,t.allQuesNum[3]=A),t.DisData.length>0&&(A++,t.allQuesNum[4]=A);case 50:case"end":return e.stop()}},e,t)}))()}},mounted:function(){this.qbId=this.$route.query.qbId,this.examId=this.$route.query.examId,0==localStorage.getItem("userType")?(this.statusM=0,this.edit=!0):1==localStorage.getItem("userType")&&(this.statusM=1,this.edit=!1),this.getList(),this.questType=Number(this.$route.query.questType),0==this.questType?this.headTitle="日常练习":1==this.questType?this.headTitle="技能考证":2==this.questType?this.headTitle="考核":3==this.questType?this.headTitle="作业":4!=this.questType||(this.headTitle="比赛")}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"AnsderDetail"},[s("Header",{attrs:{title:t.headTitle},on:{goBack:t.goBack}}),t._v(" "),s("div",{staticClass:"headBox"},[s("h3",[t._v(t._s(t.titile))]),t._v(" "),s("p",{staticClass:"comCol mt",staticStyle:{height:"10px"}},[t.startTime&&t.endTime?[t._v("考试时间："+t._s(t.startTime)+" - "+t._s(t.endTime))]:t._e()],2),t._v(" "),s("div",{staticClass:"score mt"},[s("p",[s("span",{staticClass:"comCol comWeight mr"},[t._v(t._s(t.every0*t.sinData.length+t.every1*t.mulData.length+t.every2*t.JudData.length+t.every3*t.comData.length+t.every4*t.DisData.length))]),t._v(" "),s("span",{staticClass:"comCol comWeight"},[t._v(t._s(t.totalNum))])]),t._v(" "),t._m(0)]),t._v(" "),t.subjectName?s("p",{staticClass:"mt"},[t._v("\n\t\t\t\t科目："+t._s(t.subjectName)+"\n\t\t\t")]):t._e(),t._v(" "),s("p",[t._v("\n\t\t\t\t描述："+t._s(t.qbDesc)+"\n\t\t\t")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:2==t.questType||3==t.questType||4==t.questType,expression:"questType==2||questType==3||questType==4"}],staticClass:"scoresAll"},[s("span",{staticClass:"sc"},[0==t.examStatus||1==t.examStatus?[s("b",{staticStyle:{"font-size":"28px"},attrs:{id:"myScoresAll"}},[t._v("未批卷")])]:t._e(),t._v(" "),2==t.examStatus?[t._v(t._s(t.scoreAll))]:t._e()],2),t._v(" "),s("span",[t._v("总得分")])])]),t._v(" "),t.sinData.length>0?s("div",{staticClass:"selectBox Single"},[s("h3",{staticClass:"line"},[s("span",{staticStyle:{float:"right",color:"#e7a848","margin-right":"1%"}},[t._v(t._s(t.scoreA0)+"分")]),t._v("\t\n\t\t\t\t"+t._s(t.allQuesNum[0])+"、单选题（每题"+t._s(t.every0)+"分，合计"+t._s(t.every0*t.sinData.length)+"分）")]),t._v(" "),s("div",{staticClass:"contentBox"},t._l(t.sinData,function(e,a){return s("div",{key:a,staticClass:"timuBox"},[s("div",{staticClass:"timu"},[s("h4",[s("span",{staticStyle:{float:"right",color:"#e7a848","margin-right":"1%"}},[t._v(t._s(e.qcScore)+"分")]),t._v("\n\t\t\t\t\t\t\t"+t._s(a+1)+"、"+t._s(e.qcDesc)+"\n\t\t\t\t\t\t")]),t._v(" "),t._l(e.arr,function(a,r){return s("el-radio-group",{key:r,model:{value:e.qcAnswer,callback:function(s){t.$set(e,"qcAnswer",s)},expression:"item.qcAnswer"}},[s("el-radio",{class:{active:e.stuAnswer===r},attrs:{disabled:"",label:r}},[t._v(t._s(a.item)+"、"+t._s(a.itemDesc))])],1)})],2)])}))]):t._e(),t._v(" "),t.mulData.length>0?s("div",{staticClass:"selectBox"},[s("h3",{staticClass:"line"},[s("span",{staticStyle:{float:"right",color:"#e7a848","margin-right":"1%"}},[t._v(t._s(t.scoreA1)+"分")]),t._v("\n\t\t\t\t"+t._s(t.allQuesNum[1])+"、多选题下列题目中至少有2个及以上的正确题目，多选少选均不得分（每题"+t._s(t.every1)+"分，合计"+t._s(t.every1*t.mulData.length)+"分）")]),t._v(" "),s("div",{staticClass:"contentBox"},t._l(t.mulData,function(e,a){return s("div",{key:a,staticClass:"timuBox"},[s("div",{staticClass:"timu"},[s("h4",[s("span",{staticStyle:{float:"right",color:"#e7a848","margin-right":"1%"}},[t._v(t._s(e.qcScore)+"分")]),t._v("\n\t\t\t\t\t\t\t"+t._s(a+1)+"、"+t._s(e.qcDesc)+"\n\t\t\t\t\t\t")]),t._v(" "),t._l(e.arr,function(e,a){return s("el-checkbox-group",{key:a,model:{value:e.qcAnswer,callback:function(s){t.$set(e,"qcAnswer",s)},expression:"itecM.qcAnswer"}},[s("el-checkbox",{class:{active:!0===t.currentIndex(e.qcAnswer,e.qcStAnswer)},attrs:{disabled:"",label:e.qcId}},[t._v(t._s(e.item)+"、"+t._s(e.itemDesc)+" ")])],1)})],2)])}))]):t._e(),t._v(" "),t.JudData.length>0?s("div",{staticClass:"selectBox Single"},[s("h3",{staticClass:"line"},[s("span",{staticStyle:{float:"right",color:"#e7a848","margin-right":"1%"}},[t._v(t._s(t.scoreA2)+"分")]),t._v("\n\t\t\t\t"+t._s(t.allQuesNum[2])+"、判断题（每题"+t._s(t.every2)+"分，合计"+t._s(t.every2*t.JudData.length)+"分）")]),t._v(" "),s("div",{staticClass:"contentBox"},t._l(t.JudData,function(e,a){return s("div",{key:a,staticClass:"timuBox"},[s("div",{staticClass:"timu"},[s("h4",[s("span",{staticStyle:{float:"right",color:"#e7a848","margin-right":"1%"}},[t._v(t._s(e.qcScore)+"分")]),t._v("\n\t\t\t\t\t\t\t"+t._s(a+1)+"、"+t._s(e.qcDesc)+"\n\t\t\t\t\t\t")]),t._v(" "),t._l(e.arr,function(a,r){return s("el-radio-group",{key:r,model:{value:e.qcAnswer,callback:function(s){t.$set(e,"qcAnswer",s)},expression:"item.qcAnswer"}},[s("el-radio",{class:{active:e.stuAnswer===r},attrs:{disabled:"",label:r}},[t._v(t._s(a.item)+"、"+t._s(a.itemDesc))])],1)})],2)])}))]):t._e(),t._v(" "),t.comData.length>0?s("div",{staticClass:"selectBox"},[s("h3",{staticClass:"line"},[s("span",{staticStyle:{float:"right",color:"#e7a848","margin-right":"1%"}},[t._v(t._s(t.scoreA3)+"分")]),t._v("\n\t\t\t\t"+t._s(t.allQuesNum[3])+"、填空题（每题"+t._s(t.every3)+"分，合计"+t._s(t.every3*t.comData.length)+"分）")]),t._v(" "),s("div",{staticClass:"contentBox"},t._l(t.comData,function(e,a){return s("div",{key:a,staticClass:"timuBox"},[s("div",{staticClass:"timu line"},[s("h4",[0==t.examStatus||1==t.examStatus?[t.hasQx("teach:examComment:add")?s("span",{staticClass:"editBtn",staticStyle:{float:"right",color:"#409EFF"},on:{click:function(s){t.editAnswersScore(e.qcId,e.qcDesc,e.teachScore,e.teachComment,t.every3)}}},[e.teachScore?[t._v("修改评分")]:[t._v("人工评分")]],2):t._e()]:t._e(),t._v(" "),s("span",{staticClass:"teachScore",staticStyle:{float:"right",color:"#e7a848","margin-right":"1%"}},[e.teachScore?[t._v(t._s(e.teachScore)+"分")]:t._e()],2),t._v("\n\t\t\t\t\t\t\t"+t._s(a+1)+"."+t._s(e.qcDesc)+"\n\t\t\t\t\t\t")],2),t._v(" "),s("div",{staticClass:"continputBox"},[t._l(e.arr,function(e,a){return s("p",{key:a},[e.answersl?[s("span",[t._v("( "+t._s(a+1)+" )")]),t._v(" "),s("span",{staticClass:"trueColor",staticStyle:{color:"#999"}},[s("b",{staticStyle:{color:"#000"}},[t._v(t._s(e.stuAnswer))]),t._v(" （正确答案："+t._s(e.answersl)+"） ")])]:t._e()],2)}),t._v(" "),s("p",{staticClass:"teachComment"},[e.teachComment?[t._v("评语："+t._s(e.teachComment))]:t._e()],2)],2)])])}))]):t._e(),t._v(" "),t.DisData.length>0?s("div",{staticClass:"selectBox"},[s("h3",{staticClass:"line"},[s("span",{staticStyle:{float:"right",color:"#e7a848","margin-right":"1%"}},[t._v(t._s(t.scoreA4)+"分")]),t._v("\n\t\t\t\t"+t._s(t.allQuesNum[4])+"、论述题（每题"+t._s(t.every4)+"分，合计"+t._s(t.every4*t.DisData.length)+"分）\n\t\t\t")]),t._v(" "),s("div",{staticClass:"contentBox"},t._l(t.DisData,function(e,a){return s("div",{key:a,staticClass:"timuBox"},[s("div",{staticClass:"timu line"},[s("h4",[0==t.examStatus||1==t.examStatus?[t.hasQx("teach:examComment:add")?s("span",{staticClass:"editBtn",staticStyle:{float:"right",color:"#409EFF"},on:{click:function(s){t.editAnswersScore(e.qcId,e.qcDesc,e.teachScore,e.teachComment,t.every4)}}},[e.teachScore?[t._v("修改评分")]:[t._v("人工评分")]],2):t._e()]:t._e(),t._v(" "),s("span",{staticClass:"teachScore",staticStyle:{float:"right",color:"#e7a848","margin-right":"1%"}},[e.teachScore?[t._v(t._s(e.teachScore)+"分")]:t._e()],2),t._v("\n\t\t\t\t\t\t\t"+t._s(a+1)+"."+t._s(e.qcDesc)+"\n\t\t\t\t\t\t")],2),t._v(" "),s("div",{staticClass:"continputBox"},[s("div",t._l(e.imgArr,function(e,a){return s("span",{key:a,staticStyle:{"vertical-align":"top",display:"inline-block","margin-right":"0.5%"}},[s("img",{staticStyle:{width:"100px"},attrs:{src:t.img_api+e},on:{click:t.showImages}})])})),t._v(" "),s("p",{staticStyle:{"font-size":"14px"}},[s("span",{staticStyle:{color:"#000"}},[t._v("答案：")]),t._v(t._s(e.stuAnswer))]),t._v(" "),s("p",{staticStyle:{"font-size":"14px",color:"#999"}},[s("span",[t._v("（正确答案：")]),t._v(t._s(e.qcAnswer)+"）")]),t._v(" "),s("p",{staticClass:"teachComment"},[e.teachComment?[t._v("评语："+t._s(e.teachComment))]:t._e()],2)])])])}))]):t._e(),t._v(" "),0==t.statusM?[1==t.examStatus||0==t.examStatus?s("div",{staticClass:"addScore"},[2==t.questType||3==t.questType||4==t.questType?s("el-button",{staticStyle:{width:"95%"},attrs:{type:"primary"},on:{click:t.AddScore}},[t._v("提交")]):t._e()],1):t._e()]:t._e(),t._v(" "),s("el-dialog",{attrs:{title:"查看图片",visible:t.imgDialogVisible,width:"80%",center:""},on:{"update:visible":function(e){t.imgDialogVisible=e}}},[s("div",[s("img",{staticStyle:{width:"100%"},attrs:{src:t.targetImg}})]),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(e){t.imgDialogVisible=!1}}},[t._v("确 定")])],1)]),t._v(" "),s("el-dialog",{attrs:{title:"人工评分",visible:t.showAdd},on:{"update:visible":function(e){t.showAdd=e}}},[s("p",{staticStyle:{color:"#ccc"}},[t._v("标题:"+t._s(t.pfTitle))]),t._v(" "),s("el-form",{attrs:{model:t.form}},[s("div",[s("p",[t._v("评分"),s("b",{staticStyle:{color:"red"}},[t._v("*")])]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.formScore,expression:"form.formScore"}],staticStyle:{width:"99%",padding:"8px 0 8px 3px",border:"1px solid #ddd"},attrs:{type:"text"},domProps:{value:t.form.formScore},on:{input:function(e){e.target.composing||t.$set(t.form,"formScore",e.target.value)}}})]),t._v(" "),s("div",{staticStyle:{"margin-top":"2%"}},[s("p",[t._v("评语")]),t._v(" "),s("el-input",{attrs:{maxlength:"20",type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"评语"},model:{value:t.form.pContent,callback:function(e){t.$set(t.form,"pContent",e)},expression:"form.pContent"}})],1)]),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticStyle:{width:"47%"},attrs:{type:"primary"},on:{click:t.AddInfo}},[t._v("确 定")]),t._v(" "),s("el-button",{staticStyle:{width:"47%"},on:{click:function(e){t.showAdd=!1}}},[t._v("取 消")])],1)],1)],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("span",{staticClass:"mr"},[this._v("卷面分数")]),this._v(" "),e("span",[this._v("题目总数")])])}]};var u=s("VU/8")(o,l,!1,function(t){s("6A8w")},null,null);e.default=u.exports}});